(function(T,ne){typeof exports=="object"&&typeof module<"u"?module.exports=ne():typeof define=="function"&&define.amd?define(ne):(T=typeof globalThis<"u"?globalThis:T||self,T["<<name>>"]=ne())})(this,function(){"use strict";var Vi=Object.defineProperty;var Ti=(T,ne,me)=>ne in T?Vi(T,ne,{enumerable:!0,configurable:!0,writable:!0,value:me}):T[ne]=me;var N=(T,ne,me)=>Ti(T,typeof ne!="symbol"?ne+"":ne,me);function T(){}const ne=n=>n;function me(n){return n()}function rt(){return Object.create(null)}function z(n){n.forEach(me)}function Be(n){return typeof n=="function"}function ie(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function fn(n){return Object.keys(n).length===0}function ot(n,...e){if(n==null){for(const i of e)i(void 0);return T}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function X(n){let e;return ot(n,t=>e=t)(),e}function Oe(n,e,t){n.$$.on_destroy.push(ot(e,t))}function dt(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const ut=typeof window<"u";let ft=ut?()=>window.performance.now():()=>Date.now(),ze=ut?n=>requestAnimationFrame(n):T;const $e=new Set;function ct(n){$e.forEach(e=>{e.c(n)||($e.delete(e),e.f())}),$e.size!==0&&ze(ct)}function ht(n){let e;return $e.size===0&&ze(ct),{promise:new Promise(t=>{$e.add(e={c:n,f:t})}),abort(){$e.delete(e)}}}function v(n,e){n.appendChild(e)}function gt(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function cn(n){const e=y("style");return e.textContent="/* empty */",hn(gt(n),e),e.sheet}function hn(n,e){return v(n.head||n,e),e.sheet}function R(n,e,t){n.insertBefore(e,t||null)}function A(n){n.parentNode&&n.parentNode.removeChild(n)}function Ve(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function y(n){return document.createElement(n)}function G(n){return document.createTextNode(n)}function H(){return G(" ")}function gn(){return G("")}function U(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function h(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Te(n){return n===""?null:+n}function _n(n){return Array.from(n.childNodes)}function ce(n,e){e=""+e,n.data!==e&&(n.data=e)}function pe(n,e){n.value=e??""}function _t(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function mt(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function mn(n){const e={};return n.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}const Ue=new Map;let Pe=0;function pn(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function vn(n,e){const t={stylesheet:cn(e),rules:{}};return Ue.set(n,t),t}function Ye(n,e,t,i,s,l,a,r=0){const o=16.666/i;let d=`{
`;for(let m=0;m<=1;m+=o){const p=e+(t-e)*l(m);d+=m*100+`%{${a(p,1-p)}}
`}const u=d+`100% {${a(t,1-t)}}
}`,g=`__svelte_${pn(u)}_${r}`,f=gt(n),{stylesheet:_,rules:c}=Ue.get(f)||vn(f,n);c[g]||(c[g]=!0,_.insertRule(`@keyframes ${g} ${u}`,_.cssRules.length));const b=n.style.animation||"";return n.style.animation=`${b?`${b}, `:""}${g} ${i}ms linear ${s}ms 1 both`,Pe+=1,g}function pt(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),s=t.length-i.length;s&&(n.style.animation=i.join(", "),Pe-=s,Pe||yn())}function yn(){ze(()=>{Pe||(Ue.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&A(e)}),Ue.clear())})}function Ge(n,e,t,i){if(!e)return T;const s=n.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return T;const{delay:l=0,duration:a=300,easing:r=ne,start:o=ft()+l,end:d=o+a,tick:u=T,css:g}=t(n,{from:e,to:s},i);let f=!0,_=!1,c;function b(){g&&(c=Ye(n,0,1,a,l,r,g)),l||(_=!0)}function m(){g&&pt(n,c),f=!1}return ht(p=>{if(!_&&p>=o&&(_=!0),_&&p>=d&&(u(1,0),m()),!f)return!1;if(_){const $=p-o,k=0+1*r($/a);u(k,1-k)}return!0}),b(),u(0,1),m}function We(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:i}=e,s=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=i,He(n,s)}}function He(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const i=getComputedStyle(n),s=i.transform==="none"?"":i.transform;n.style.transform=`${s} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Ne;function Le(n){Ne=n}function Qe(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function we(n){Qe().$$.on_mount.push(n)}function Ee(n){Qe().$$.on_destroy.push(n)}function Xe(){const n=Qe();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const l=mt(e,t,{cancelable:i});return s.slice().forEach(a=>{a.call(n,l)}),!l.defaultPrevented}return!0}}function ve(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const De=[],se=[];let Ie=[];const Ze=[],bn=Promise.resolve();let xe=!1;function $n(){xe||(xe=!0,bn.then(L))}function le(n){Ie.push(n)}function ke(n){Ze.push(n)}const et=new Set;let Me=0;function L(){if(Me!==0)return;const n=Ne;do{try{for(;Me<De.length;){const e=De[Me];Me++,Le(e),wn(e.$$)}}catch(e){throw De.length=0,Me=0,e}for(Le(null),De.length=0,Me=0;se.length;)se.pop()();for(let e=0;e<Ie.length;e+=1){const t=Ie[e];et.has(t)||(et.add(t),t())}Ie.length=0}while(De.length);for(;Ze.length;)Ze.pop()();xe=!1,et.clear(),Le(n)}function wn(n){if(n.fragment!==null){n.update(),z(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(le)}}function Dn(n){const e=[],t=[];Ie.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),Ie=e}let Ae;function In(){return Ae||(Ae=Promise.resolve(),Ae.then(()=>{Ae=null})),Ae}function tt(n,e,t){n.dispatchEvent(mt(`${e?"intro":"outro"}${t}`))}const je=new Set;let he;function ue(){he={r:0,c:[],p:he}}function fe(){he.r||z(he.c),he=he.p}function B(n,e){n&&n.i&&(je.delete(n),n.i(e))}function j(n,e,t,i){if(n&&n.o){if(je.has(n))return;je.add(n),he.c.push(()=>{je.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const kn={duration:0};function Y(n,e,t,i){let l=e(n,t,{direction:"both"}),a=i?0:1,r=null,o=null,d=null,u;function g(){d&&pt(n,d)}function f(c,b){const m=c.b-a;return b*=Math.abs(m),{a,b:c.b,d:m,duration:b,start:c.start,end:c.start+b,group:c.group}}function _(c){const{delay:b=0,duration:m=300,easing:p=ne,tick:$=T,css:k}=l||kn,w={start:ft()+b,b:c};c||(w.group=he,he.r+=1),"inert"in n&&(c?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),r||o?o=w:(k&&(g(),d=Ye(n,a,c,m,b,p,k)),c&&$(0,1),r=f(w,m),le(()=>tt(n,c,"start")),ht(I=>{if(o&&I>o.start&&(r=f(o,m),o=null,tt(n,r.b,"start"),k&&(g(),d=Ye(n,a,r.b,r.duration,0,p,l.css))),r){if(I>=r.end)$(a=r.b,1-a),tt(n,r.b,"end"),o||(r.b?g():--r.group.r||z(r.group.c)),r=null;else if(I>=r.start){const E=I-r.start;a=r.a+r.d*p(E/r.duration),$(a,1-a)}}return!!(r||o)}))}return{run(c){Be(l)?In().then(()=>{l=l({direction:c?"in":"out"}),_(c)}):_(c)},end(){g(),r=o=null}}}function Z(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Mn(n,e){n.d(1),e.delete(n.key)}function Sn(n,e){j(n,1,1,()=>{e.delete(n.key)})}function nt(n,e){n.f(),Sn(n,e)}function Ke(n,e,t,i,s,l,a,r,o,d,u,g){let f=n.length,_=l.length,c=f;const b={};for(;c--;)b[n[c].key]=c;const m=[],p=new Map,$=new Map,k=[];for(c=_;c--;){const K=g(s,l,c),J=t(K);let C=a.get(J);C?k.push(()=>C.p(K,e)):(C=d(J,K),C.c()),p.set(J,m[c]=C),J in b&&$.set(J,Math.abs(c-b[J]))}const w=new Set,I=new Set;function E(K){B(K,1),K.m(r,u),a.set(K.key,K),u=K.first,_--}for(;f&&_;){const K=m[_-1],J=n[f-1],C=K.key,D=J.key;K===J?(u=K.first,f--,_--):p.has(D)?!a.has(C)||w.has(C)?E(K):I.has(D)?f--:$.get(C)>$.get(D)?(I.add(C),E(K)):(w.add(D),f--):(o(J,a),f--)}for(;f--;){const K=n[f];p.has(K.key)||o(K,a)}for(;_;)E(m[_-1]);return z(k),m}function Se(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function x(n){n&&n.c()}function W(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),le(()=>{const l=n.$$.on_mount.map(me).filter(Be);n.$$.on_destroy?n.$$.on_destroy.push(...l):z(l),n.$$.on_mount=[]}),s.forEach(le)}function Q(n,e){const t=n.$$;t.fragment!==null&&(Dn(t.after_update),z(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Cn(n,e){n.$$.dirty[0]===-1&&(De.push(n),$n(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function re(n,e,t,i,s,l,a=null,r=[-1]){const o=Ne;Le(n);const d=n.$$={fragment:null,ctx:[],props:l,update:T,not_equal:s,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:rt(),dirty:r,skip_bound:!1,root:e.target||o.$$.root};a&&a(d.root);let u=!1;if(d.ctx=t?t(n,e.props||{},(g,f,..._)=>{const c=_.length?_[0]:f;return d.ctx&&s(d.ctx[g],d.ctx[g]=c)&&(!d.skip_bound&&d.bound[g]&&d.bound[g](c),u&&Cn(n,g)),f}):[],d.update(),u=!0,z(d.before_update),d.fragment=i?i(d.ctx):!1,e.target){if(e.hydrate){const g=_n(e.target);d.fragment&&d.fragment.l(g),g.forEach(A)}else d.fragment&&d.fragment.c();e.intro&&B(n.$$.fragment),W(n,e.target,e.anchor),L()}Le(o)}let vt;typeof HTMLElement=="function"&&(vt=class extends HTMLElement{constructor(e,t,i){super();N(this,"$$ctor");N(this,"$$s");N(this,"$$c");N(this,"$$cn",!1);N(this,"$$d",{});N(this,"$$r",!1);N(this,"$$p_d",{});N(this,"$$l",{});N(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,i&&this.attachShadow({mode:"open"})}addEventListener(e,t,i){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const s=this.$$c.$on(e,t);this.$$l_u.set(t,s)}super.addEventListener(e,t,i)}removeEventListener(e,t,i){if(super.removeEventListener(e,t,i),this.$$c){const s=this.$$l_u.get(t);s&&(s(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(l){return()=>{let a;return{c:function(){a=y("slot"),l!=="default"&&h(a,"name",l)},m:function(d,u){R(d,a,u)},d:function(d){d&&A(a)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const t={},i=mn(this);for(const l of this.$$s)l in i&&(t[l]=[e(l)]);for(const l of this.attributes){const a=this.$$g_p(l.name);a in this.$$d||(this.$$d[a]=Fe(a,l.value,this.$$p_d,"toProp"))}for(const l in this.$$p_d)!(l in this.$$d)&&this[l]!==void 0&&(this.$$d[l]=this[l],delete this[l]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const s=()=>{this.$$r=!0;for(const l in this.$$p_d)if(this.$$d[l]=this.$$c.$$.ctx[this.$$c.$$.props[l]],this.$$p_d[l].reflect){const a=Fe(l,this.$$d[l],this.$$p_d,"toAttribute");a==null?this.removeAttribute(this.$$p_d[l].attribute||l):this.setAttribute(this.$$p_d[l].attribute||l,a)}this.$$r=!1};this.$$c.$$.after_update.push(s),s();for(const l in this.$$l)for(const a of this.$$l[l]){const r=this.$$c.$on(l,a);this.$$l_u.set(a,r)}this.$$l={}}}attributeChangedCallback(e,t,i){var s;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Fe(e,i,this.$$p_d,"toProp"),(s=this.$$c)==null||s.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Fe(n,e,t,i){var l;const s=(l=t[n])==null?void 0:l.type;if(e=s==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!t[n])return e;if(i==="toAttribute")switch(s){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(s){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function oe(n,e,t,i,s,l){let a=class extends vt{constructor(){super(n,t,s),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(r=>(e[r].attribute||r).toLowerCase())}};return Object.keys(e).forEach(r=>{Object.defineProperty(a.prototype,r,{get(){return this.$$c&&r in this.$$c?this.$$c[r]:this.$$d[r]},set(o){var d;o=Fe(r,o,e),this.$$d[r]=o,(d=this.$$c)==null||d.$set({[r]:o})}})}),i.forEach(r=>{Object.defineProperty(a.prototype,r,{get(){var o;return(o=this.$$c)==null?void 0:o[r]}})}),n.element=a,a}class de{constructor(){N(this,"$$");N(this,"$$set")}$destroy(){Q(this,1),this.$destroy=T}$on(e,t){if(!Be(t))return T;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!fn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const On="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(On);class Nn{constructor(){N(this,"keyCounter",0)}getNewKey(){return(this.keyCounter++).toString(16)}}var ge=new Nn;class it{constructor(e="NONE",t="{}"){N(this,"id");N(this,"type");N(this,"data");this.id=ge.getNewKey(),this.type=e,this.data=JSON.parse(t)}}class yt{constructor(e=[]){N(this,"id");N(this,"data",[]);this.id=ge.getNewKey(),this.data=[],e.forEach(t=>{t!=null&&t.data&&t.type?this.data.push(new it(t.type,t.data)):this.data.push(new it)})}addItem(){this.data.push(new it)}remItem(e){let t=this.data.findIndex(i=>i.id==e);if(t==-1){console.error("cant remove column, since id is not present in data");return}this.data.splice(t,1)}}class bt{constructor(e=[]){N(this,"id");N(this,"data",[]);this.id=ge.getNewKey(),this.data=[],e.forEach(t=>{this.data.push(new yt(t.data))})}addColumn(){this.data.push(new yt)}remColumn(e){let t=this.data.findIndex(i=>i.id==e);if(t==-1){console.error("cant remove column, since id is not present in data");return}this.data.splice(t,1)}}class Ln{constructor(e){N(this,"id");N(this,"data",[]);this.id=ge.getNewKey(),this.data=[],e.forEach(t=>{t.data&&this.data.push(new bt(t.data))})}addRow(){this.data.push(new bt)}remRow(e){let t=this.data.findIndex(i=>i.id==e);if(t==-1){console.error("cant remove Row, since id is not present in data");return}this.data.splice(t,1)}}const Ce=[];function Re(n,e=T){let t;const i=new Set;function s(r){if(ie(n,r)&&(n=r,t)){const o=!Ce.length;for(const d of i)d[1](),Ce.push(d,n);if(o){for(let d=0;d<Ce.length;d+=2)Ce[d][0](Ce[d+1]);Ce.length=0}}}function l(r){s(r(n))}function a(r,o=T){const d=[r,o];return i.add(d),i.size===1&&(t=e(s,l)||T),r(n),()=>{i.delete(d),i.size===0&&t&&(t(),t=null)}}return{set:s,update:l,subscribe:a}}function st(n){const e=n-1;return e*e*e+1}function qe(n,{delay:e=0,duration:t=400,easing:i=ne}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:l=>`opacity: ${l*s}`}}function $t(n,{delay:e=0,duration:t=400,easing:i=st,x:s=0,y:l=0,opacity:a=0}={}){const r=getComputedStyle(n),o=+r.opacity,d=r.transform==="none"?"":r.transform,u=o*(1-a),[g,f]=dt(s),[_,c]=dt(l);return{delay:e,duration:t,easing:i,css:(b,m)=>`
			transform: ${d} translate(${(1-b)*g}${f}, ${(1-b)*_}${c});
			opacity: ${o-u*m}`}}function ae(n,{delay:e=0,duration:t=400,easing:i=st,axis:s="y"}={}){const l=getComputedStyle(n),a=+l.opacity,r=s==="y"?"height":"width",o=parseFloat(l[r]),d=s==="y"?["top","bottom"]:["left","right"],u=d.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),g=parseFloat(l[`padding${u[0]}`]),f=parseFloat(l[`padding${u[1]}`]),_=parseFloat(l[`margin${u[0]}`]),c=parseFloat(l[`margin${u[1]}`]),b=parseFloat(l[`border${u[0]}Width`]),m=parseFloat(l[`border${u[1]}Width`]);return{delay:e,duration:t,easing:i,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*a};${r}: ${p*o}px;padding-${d[0]}: ${p*g}px;padding-${d[1]}: ${p*f}px;margin-${d[0]}: ${p*_}px;margin-${d[1]}: ${p*c}px;border-${d[0]}-width: ${p*b}px;border-${d[1]}-width: ${p*m}px;`}}function En(n){let e,t,i;return{c(){e=y("div"),e.textContent="Hit Point Maximum",t=H(),i=y("input"),h(i,"type","number")},m(s,l){R(s,e,l),R(s,t,l),R(s,i,l)},d(s){s&&(A(e),A(t),A(i))}}}function An(n){let e,t,i;return{c(){e=y("div"),e.textContent="Hit Point Maximum",t=H(),i=y("input"),h(i,"type","number")},m(s,l){R(s,e,l),R(s,t,l),R(s,i,l)},d(s){s&&(A(e),A(t),A(i))}}}function Rn(n){let e,t,i;return{c(){e=y("div"),e.textContent="Hit Point Maximum",t=H(),i=y("input"),h(i,"type","number")},m(s,l){R(s,e,l),R(s,t,l),R(s,i,l)},d(s){s&&(A(e),A(t),A(i))}}}function Bn(n){let e,t,i,s,l,a,r,o,d,u,g,f;function _(m,p){return m[0]?Rn:m[1]?An:En}let c=_(n),b=c(n);return{c(){e=y("div"),t=y("div"),t.textContent="Hit Points",i=H(),s=y("input"),a=H(),r=y("div"),r.textContent="temporary Hit Points",o=H(),d=y("input"),u=H(),b.c(),h(s,"type","number"),s.disabled=l=!n[0],h(d,"type","number")},m(m,p){R(m,e,p),v(e,t),v(e,i),v(e,s),pe(s,n[2]),v(e,a),v(e,r),v(e,o),v(e,d),v(e,u),b.m(e,null),g||(f=[U(s,"input",n[6]),U(s,"change",n[3])],g=!0)},p(m,[p]){p&1&&l!==(l=!m[0])&&(s.disabled=l),p&4&&Te(s.value)!==m[2]&&pe(s,m[2]),c!==(c=_(m))&&(b.d(1),b=c(m),b&&(b.c(),b.m(e,null)))},i:T,o:T,d(m){m&&A(e),b.d(),g=!1,z(f)}}}function Vn(n,e,t){let{sys:i}=e,{editMode:s}=e,{playMode:l}=e,{data:a}=e,r=i.getNode("fixed","generic","Hit Points"),o=r.getValue();const d=ge.getNewKey();we(()=>{r.addUpdateListener(name+d+"SvelteView",()=>{t(2,o=r.getValue())})}),Ee(()=>{r.removeUpdateListener(name+d+"SvelteView")});function u(){return r.setValue(o),null}function g(){o=Te(this.value),t(2,o)}return n.$$set=f=>{"sys"in f&&t(4,i=f.sys),"editMode"in f&&t(0,s=f.editMode),"playMode"in f&&t(1,l=f.playMode),"data"in f&&t(5,a=f.data)},[s,l,o,u,i,a,g]}class wt extends de{constructor(e){super(),re(this,e,Vn,Bn,ie,{sys:4,editMode:0,playMode:1,data:5})}get sys(){return this.$$.ctx[4]}set sys(e){this.$$set({sys:e}),L()}get editMode(){return this.$$.ctx[0]}set editMode(e){this.$$set({editMode:e}),L()}get playMode(){return this.$$.ctx[1]}set playMode(e){this.$$set({playMode:e}),L()}get data(){return this.$$.ctx[5]}set data(e){this.$$set({data:e}),L()}}oe(wt,{sys:{},editMode:{},playMode:{},data:{}},[],[],!0);var ye=(n=>(n.HitPoints="HitPoints",n.ProficiencyBonus="ProficiencyBonus",n.SkillProficiencies="SkillProficiencies",n.SpellInfo="SpellInfo",n.Stats="Stats",n))(ye||{});function Tn(n,{from:e,to:t},i={}){const s=getComputedStyle(n),l=s.transform==="none"?"":s.transform,[a,r]=s.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*a/t.width-(t.left+a),d=e.top+e.height*r/t.height-(t.top+r),{delay:u=0,duration:g=_=>Math.sqrt(_)*120,easing:f=st}=i;return{delay:u,duration:Be(g)?g(Math.sqrt(o*o+d*d)):g,easing:f,css:(_,c)=>{const b=c*o,m=c*d,p=_+c*e.width/t.width,$=_+c*e.height/t.height;return`transform: ${l} translate(${b}px, ${m}px) scale(${p}, ${$});`}}}function Dt(n,e,t){const i=n.slice();return i[23]=e[t],i}function It(n){let e,t=(n[0]==null?n[2]:n[0])+"",i,s,l,a,r,o;return{c(){e=y("div"),i=G(t),h(e,"class","GrobSelectLabel effect"),h(e,"data-isdisabled",s=n[3]??!1),h(e,"data-iserror",l=n[4]??!1),h(e,"data-selected",a=n[0]??!1),h(e,"tabindex","-1")},m(d,u){R(d,e,u),v(e,i),n[17](e),r||(o=[U(e,"focus",n[13]),U(e,"blur",n[14])],r=!0)},p(d,u){u&5&&t!==(t=(d[0]==null?d[2]:d[0])+"")&&ce(i,t),u&8&&s!==(s=d[3]??!1)&&h(e,"data-isdisabled",s),u&16&&l!==(l=d[4]??!1)&&h(e,"data-iserror",l),u&1&&a!==(a=d[0]??!1)&&h(e,"data-selected",a)},d(d){d&&A(e),n[17](null),r=!1,z(o)}}}function kt(n){let e,t,i,s,l,a=[],r=new Map,o,d,u,g,f,_,c=Z(n[1]);const b=p=>p[23];for(let p=0;p<c.length;p+=1){let $=Dt(n,c,p),k=b($);r.set(k,a[p]=Mt(k,$))}let m=n[1].length==0&&St();return{c(){var p,$,k,w;e=y("div"),t=y("div"),i=y("div"),l=H();for(let I=0;I<a.length;I+=1)a[I].c();o=H(),m&&m.c(),d=H(),u=y("div"),h(i,"class","Arrow"),h(i,"style",s=`left:${n[12]}px`),h(t,"class","ArrowContainer"),h(u,"class","selectEndTracker"),h(e,"class","SelectPopUp"),h(e,"style",g="width:"+(((p=n[7])==null?void 0:p.width)??100)+"px;left: "+((($=n[7])==null?void 0:$.x)??0)+"px;top: "+((((k=n[7])==null?void 0:k.y)??0)+(((w=n[7])==null?void 0:w.height)??0)+8)+"px;max-height:"+n[11]+"px")},m(p,$){R(p,e,$),v(e,t),v(t,i),n[18](t),v(e,l);for(let k=0;k<a.length;k+=1)a[k]&&a[k].m(e,null);v(e,o),m&&m.m(e,null),v(e,d),v(e,u),n[19](u),_=!0},p(p,$){var k,w,I,E;(!_||$&4096&&s!==(s=`left:${p[12]}px`))&&h(i,"style",s),$&32771&&(c=Z(p[1]),a=Ke(a,$,b,1,p,c,r,e,Mn,Mt,o,Dt)),p[1].length==0?m||(m=St(),m.c(),m.m(e,d)):m&&(m.d(1),m=null),(!_||$&2176&&g!==(g="width:"+(((k=p[7])==null?void 0:k.width)??100)+"px;left: "+(((w=p[7])==null?void 0:w.x)??0)+"px;top: "+((((I=p[7])==null?void 0:I.y)??0)+(((E=p[7])==null?void 0:E.height)??0)+8)+"px;max-height:"+p[11]+"px"))&&h(e,"style",g)},i(p){_||(p&&le(()=>{_&&(f||(f=Y(e,ae,{},!0)),f.run(1))}),_=!0)},o(p){p&&(f||(f=Y(e,ae,{},!1)),f.run(0)),_=!1},d(p){p&&A(e),n[18](null);for(let $=0;$<a.length;$+=1)a[$].d();m&&m.d(),n[19](null),p&&f&&f.end()}}}function Mt(n,e){let t,i=e[23]+"",s,l,a,r,o;return{key:n,first:null,c(){t=y("div"),s=G(i),h(t,"role","none"),h(t,"class","GrobSelectOption"),h(t,"data-selected",l=e[0]==e[23]),h(t,"data-value",a=e[23]),this.first=t},m(d,u){R(d,t,u),v(t,s),r||(o=[U(t,"click",e[15]),U(t,"keydown",e[15])],r=!0)},p(d,u){e=d,u&2&&i!==(i=e[23]+"")&&ce(s,i),u&3&&l!==(l=e[0]==e[23])&&h(t,"data-selected",l),u&2&&a!==(a=e[23])&&h(t,"data-value",a)},d(d){d&&A(t),r=!1,z(o)}}}function St(n){let e;return{c(){e=y("i"),e.textContent="No Options",h(e,"class","GrobSelectInfo")},m(t,i){R(t,e,i)},d(t){t&&A(e)}}}function Un(n){let e,t=n[0],i,s,l=It(n),a=(n[8]||n[5])&&kt(n);return{c(){e=y("div"),l.c(),i=H(),s=y("div"),a&&a.c(),h(e,"class","GrobSelect")},m(r,o){R(r,e,o),l.m(e,null),v(e,i),v(e,s),a&&a.m(s,null)},p(r,[o]){o&1&&ie(t,t=r[0])?(l.d(1),l=It(r),l.c(),l.m(e,i)):l.p(r,o),r[8]||r[5]?a?(a.p(r,o),o&288&&B(a,1)):(a=kt(r),a.c(),B(a,1),a.m(s,null)):a&&(ue(),j(a,1,1,()=>{a=null}),fe())},i(r){B(a)},o(r){j(a)},d(r){r&&A(e),l.d(r),a&&a.d()}}}const Pn=100;function Hn(n,e,t){let i=Xe(),{options:s}=e,{selected:l=null}=e,{unSelectedplaceholder:a="None Selected"}=e,{disabled:r=!1}=e,{isError:o=!1}=e,{forceOpen:d=!1}=e,{maxHeight:u=500}=e,g,f,_=!1,c,b,m=u,p=0;function $(){const D=g.getBoundingClientRect();t(7,f=D),t(8,_=!0),E(),setTimeout(I,Pn)}function k(){setTimeout(()=>{t(8,_=!1)},200)}function w(D){let F=D.target.getAttribute("data-value");l==F?(t(0,l=null),i("onDeselect")):(t(0,l=F),i("onSelect",l))}function I(){let D=b.getBoundingClientRect().bottom,F=c.getBoundingClientRect().bottom,ee=window.document.body.getBoundingClientRect().height;if(F>ee){let te=F-ee,M=F-D-te;M<m&&t(11,m=M)}}function E(){let D=g.getBoundingClientRect().width;t(12,p=D/2)}function K(D){se[D?"unshift":"push"](()=>{g=D,t(6,g)})}function J(D){se[D?"unshift":"push"](()=>{b=D,t(10,b)})}function C(D){se[D?"unshift":"push"](()=>{c=D,t(9,c)})}return n.$$set=D=>{"options"in D&&t(1,s=D.options),"selected"in D&&t(0,l=D.selected),"unSelectedplaceholder"in D&&t(2,a=D.unSelectedplaceholder),"disabled"in D&&t(3,r=D.disabled),"isError"in D&&t(4,o=D.isError),"forceOpen"in D&&t(5,d=D.forceOpen),"maxHeight"in D&&t(16,u=D.maxHeight)},[l,s,a,r,o,d,g,f,_,c,b,m,p,$,k,w,u,K,J,C]}class jn extends de{constructor(e){super(),re(this,e,Hn,Un,ie,{options:1,selected:0,unSelectedplaceholder:2,disabled:3,isError:4,forceOpen:5,maxHeight:16})}get options(){return this.$$.ctx[1]}set options(e){this.$$set({options:e}),L()}get selected(){return this.$$.ctx[0]}set selected(e){this.$$set({selected:e}),L()}get unSelectedplaceholder(){return this.$$.ctx[2]}set unSelectedplaceholder(e){this.$$set({unSelectedplaceholder:e}),L()}get disabled(){return this.$$.ctx[3]}set disabled(e){this.$$set({disabled:e}),L()}get isError(){return this.$$.ctx[4]}set isError(e){this.$$set({isError:e}),L()}get forceOpen(){return this.$$.ctx[5]}set forceOpen(e){this.$$set({forceOpen:e}),L()}get maxHeight(){return this.$$.ctx[16]}set maxHeight(e){this.$$set({maxHeight:e}),L()}}oe(jn,{options:{},selected:{},unSelectedplaceholder:{},disabled:{type:"Boolean"},isError:{type:"Boolean"},forceOpen:{type:"Boolean"},maxHeight:{}},[],[],!0);function Ct(n,e,t){const i=n.slice();return i[8]=e[t],i}function Ot(n){let e,t=n[8]+"",i,s;return{c(){e=y("option"),i=G(t),s=H(),e.__value=n[8],pe(e,e.__value),e.selected=n[2]==n[8]},m(l,a){R(l,e,a),v(e,i),v(e,s)},p:T,d(l){l&&A(e)}}}function Kn(n){let e,t,i,s,l,a,r,o=Z(n[1]),d=[];for(let u=0;u<o.length;u+=1)d[u]=Ot(Ct(n,o,u));return{c(){e=y("div"),t=y("div"),i=y("div"),s=y("select"),l=y("option"),l.textContent="choose component ";for(let u=0;u<d.length;u+=1)d[u].c();l.__value=null,pe(l,l.__value),h(i,"class","ItemOptionBtn "),h(t,"class","ItemOptions"),h(e,"class","ItemOptionsContainer")},m(u,g){R(u,e,g),v(e,t),v(t,i),v(i,s),v(s,l);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(s,null);n[6](s),a||(r=U(s,"change",n[3]),a=!0)},p(u,[g]){if(g&6){o=Z(u[1]);let f;for(f=0;f<o.length;f+=1){const _=Ct(u,o,f);d[f]?d[f].p(_,g):(d[f]=Ot(_),d[f].c(),d[f].m(s,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=o.length}},i:T,o:T,d(u){u&&A(e),Ve(d,u),n[6](null),a=!1,r()}}}function Fn(n,e,t){let i=Xe(),{data:s}=e,{editMode:l}=e,a=Object.keys(ye),r=s.type,o;function d(){let g=o.value;t(4,s.type=g,s),i("optionSelected")}function u(g){se[g?"unshift":"push"](()=>{o=g,t(0,o),t(1,a)})}return n.$$set=g=>{"data"in g&&t(4,s=g.data),"editMode"in g&&t(5,l=g.editMode)},[o,a,r,d,s,l,u]}class Nt extends de{constructor(e){super(),re(this,e,Fn,Kn,ie,{data:4,editMode:5})}get data(){return this.$$.ctx[4]}set data(e){this.$$set({data:e}),L()}get editMode(){return this.$$.ctx[5]}set editMode(e){this.$$set({editMode:e}),L()}}oe(Nt,{data:{},editMode:{}},[],[],!0);function qn(n){let e,t,i,s,l,a,r;return{c(){e=y("div"),t=y("div"),t.textContent="Proficiency Bonus",i=H(),s=y("input"),h(s,"type","number"),s.disabled=l=!n[0],h(e,"class","ProficiencyBonus")},m(o,d){R(o,e,d),v(e,t),v(e,i),v(e,s),pe(s,n[1]),a||(r=[U(s,"input",n[5]),U(s,"change",n[2])],a=!0)},p(o,[d]){d&1&&l!==(l=!o[0])&&(s.disabled=l),d&2&&Te(s.value)!==o[1]&&pe(s,o[1])},i:T,o:T,d(o){o&&A(e),a=!1,z(r)}}}function Jn(n,e,t){let{sys:i}=e,{editMode:s}=e,{data:l}=e,a=i.getNode("fixed","generic","Proficiency Bonus"),r=a.getValue();const o=ge.getNewKey();we(()=>{a.addUpdateListener(name+o+"SvelteView",()=>{t(1,r=a.getValue())})}),Ee(()=>{a.removeUpdateListener(name+o+"SvelteView")});function d(){return a.setValue(r),null}function u(){r=Te(this.value),t(1,r)}return n.$$set=g=>{"sys"in g&&t(3,i=g.sys),"editMode"in g&&t(0,s=g.editMode),"data"in g&&t(4,l=g.data)},[s,r,d,i,l,u]}class Lt extends de{constructor(e){super(),re(this,e,Jn,qn,ie,{sys:3,editMode:0,data:4})}get sys(){return this.$$.ctx[3]}set sys(e){this.$$set({sys:e}),L()}get editMode(){return this.$$.ctx[0]}set editMode(e){this.$$set({editMode:e}),L()}get data(){return this.$$.ctx[4]}set data(e){this.$$set({data:e}),L()}}oe(Lt,{sys:{},editMode:{},data:{}},[],[],!0);function zn(n){let e,t,i,s,l,a,r,o,d,u,g,f,_;return{c(){e=y("div"),t=y("div"),i=y("div"),s=H(),l=y("div"),a=y("p"),r=G(n[1]),o=H(),d=y("div"),u=y("p"),g=G(n[3]),h(i,"class","skillproficiencyMark"),h(i,"data-level",n[2]),h(i,"role","none"),h(t,"class","skillproficiencyMarkParent"),h(l,"class","skillproficiencyMarkName"),h(d,"class","skillproficiencyMarkValue"),h(e,"class","skillproficiencyContainer"),h(e,"data-edit",n[0])},m(c,b){R(c,e,b),v(e,t),v(t,i),v(e,s),v(e,l),v(l,a),v(a,r),v(e,o),v(e,d),v(d,u),v(u,g),f||(_=[U(i,"keyup",n[6]),U(i,"click",n[4])],f=!0)},p(c,[b]){b&4&&h(i,"data-level",c[2]),b&2&&ce(r,c[1]),b&8&&ce(g,c[3]),b&1&&h(e,"data-edit",c[0])},i:T,o:T,d(c){c&&A(e),f=!1,z(_)}}}function Yn(n,e,t){let{edit:i}=e,{name:s}=e,{sys:l}=e,a=l.getNode("fixed","SkillProficiencies",s),r=l.getNode("derived","skillproficiencyBonus",s),o=a.getValue(),d=r.getValue();const u=ge.getNewKey();we(()=>{a.addUpdateListener(s+u+"SvelteView",()=>{t(2,o=a.getValue())}),r.addUpdateListener(s+u+"SvelteView",()=>{t(3,d=r.getValue())})}),Ee(()=>{a.removeUpdateListener(s+"SvelteView"),r.removeUpdateListener(s+"SvelteView")});function g(){if(!i)return;let _=a.getValue();return _=(_+1)%3,a.setValue(_),null}function f(_){ve.call(this,n,_)}return n.$$set=_=>{"edit"in _&&t(0,i=_.edit),"name"in _&&t(1,s=_.name),"sys"in _&&t(5,l=_.sys)},[i,s,o,d,g,l,f]}class Et extends de{constructor(e){super(),re(this,e,Yn,zn,ie,{edit:0,name:1,sys:5})}get edit(){return this.$$.ctx[0]}set edit(e){this.$$set({edit:e}),L()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),L()}get sys(){return this.$$.ctx[5]}set sys(e){this.$$set({sys:e}),L()}}oe(Et,{edit:{},name:{},sys:{}},[],[],!0);function At(n,e,t){const i=n.slice();return i[4]=e[t],i}function Rt(n){let e,t;return e=new Et({props:{edit:n[0],name:n[4],sys:n[1]}}),{c(){x(e.$$.fragment)},m(i,s){W(e,i,s),t=!0},p(i,s){const l={};s&1&&(l.edit=i[0]),s&2&&(l.sys=i[1]),e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function Gn(n){let e,t,i=Z(n[2]),s=[];for(let a=0;a<i.length;a+=1)s[a]=Rt(At(n,i,a));const l=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){e=y("div");for(let a=0;a<s.length;a+=1)s[a].c();h(e,"class","skillproficiencyCollection"),h(e,"data-edit",n[0])},m(a,r){R(a,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(a,[r]){if(r&7){i=Z(a[2]);let o;for(o=0;o<i.length;o+=1){const d=At(a,i,o);s[o]?(s[o].p(d,r),B(s[o],1)):(s[o]=Rt(d),s[o].c(),B(s[o],1),s[o].m(e,null))}for(ue(),o=i.length;o<s.length;o+=1)l(o);fe()}(!t||r&1)&&h(e,"data-edit",a[0])},i(a){if(!t){for(let r=0;r<i.length;r+=1)B(s[r]);t=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)j(s[r]);t=!1},d(a){a&&A(e),Ve(s,a)}}}function Wn(n,e,t){let{edit:i}=e,{sys:s}=e,{data:l}=e,a=s.getNodeNames("fixed","SkillProficiencies");return n.$$set=r=>{"edit"in r&&t(0,i=r.edit),"sys"in r&&t(1,s=r.sys),"data"in r&&t(3,l=r.data)},[i,s,a,l]}class Bt extends de{constructor(e){super(),re(this,e,Wn,Gn,ie,{edit:0,sys:1,data:3})}get edit(){return this.$$.ctx[0]}set edit(e){this.$$set({edit:e}),L()}get sys(){return this.$$.ctx[1]}set sys(e){this.$$set({sys:e}),L()}get data(){return this.$$.ctx[3]}set data(e){this.$$set({data:e}),L()}}oe(Bt,{edit:{},sys:{},data:{}},[],[],!0);function Vt(n,e,t){const i=n.slice();return i[17]=e[t],i}function Qn(n){let e;return{c(){e=y("div")},m(t,i){R(t,e,i)},p:T,d(t){t&&A(e)}}}function Xn(n){let e,t,i,s,l=Z(n[5]),a=[];for(let r=0;r<l.length;r+=1)a[r]=Tt(Vt(n,l,r));return{c(){e=y("div"),t=y("select");for(let r=0;r<a.length;r+=1)a[r].c()},m(r,o){R(r,e,o),v(e,t);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(t,null);n[9](t),i||(s=U(t,"change",n[6]),i=!0)},p(r,o){if(o&34){l=Z(r[5]);let d;for(d=0;d<l.length;d+=1){const u=Vt(r,l,d);a[d]?a[d].p(u,o):(a[d]=Tt(u),a[d].c(),a[d].m(t,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=l.length}},d(r){r&&A(e),Ve(a,r),n[9](null),i=!1,s()}}}function Tt(n){let e,t=n[17]+"",i,s,l;return{c(){e=y("option"),i=G(t),s=H(),e.__value=n[17],pe(e,e.__value),e.selected=l=n[17]==n[1]},m(a,r){R(a,e,r),v(e,i),v(e,s)},p(a,r){r&2&&l!==(l=a[17]==a[1])&&(e.selected=l)},d(a){a&&A(e)}}}function Zn(n){let e,t,i,s,l,a,r,o,d,u,g,f,_,c,b,m,p;function $(I,E){return I[0]?Xn:Qn}let k=$(n),w=k(n);return{c(){e=y("div"),w.c(),t=H(),i=y("div"),s=y("div"),l=G(n[1]),a=H(),r=y("div"),o=y("div"),o.textContent="Spell DC",d=H(),u=y("div"),g=G(n[2]),f=H(),_=y("div"),c=y("div"),c.textContent="Spell Bonus",b=H(),m=y("div"),p=G(n[3]),h(i,"class","spellDCContainer")},m(I,E){R(I,e,E),w.m(e,null),v(e,t),v(e,i),v(i,s),v(s,l),v(i,a),v(i,r),v(r,o),v(r,d),v(r,u),v(u,g),v(i,f),v(i,_),v(_,c),v(_,b),v(_,m),v(m,p)},p(I,[E]){k===(k=$(I))&&w?w.p(I,E):(w.d(1),w=k(I),w&&(w.c(),w.m(e,t))),E&2&&ce(l,I[1]),E&4&&ce(g,I[2]),E&8&&ce(p,I[3])},i:T,o:T,d(I){I&&A(e),w.d()}}}function xn(n,e,t){let{sys:i}=e,{edit:s}=e,{data:l}=e;const a=ge.getNewKey();let r=l.data,o=i.getNodeNames("derived","Spell Bonus");JSON.stringify(r)===JSON.stringify({})&&(r.showStat=o[0]);let d=r.showStat,u=i.getNode("derived","Spell Bonus",d),g=i.getNode("derived","Spell DC",d),f=u.getValue(),_=g.getValue(),c;function b(){let w=c.value;t(1,d=w),u=i.getNode("derived","Spell Bonus",d),g=i.getNode("derived","Spell DC",d),t(2,f=u.getValue()),t(3,_=g.getValue())}function m(){t(2,f=u.getValue()),t(3,_=g.getValue())}function p(){u.addUpdateListener(name+"SpellInfoView"+a,()=>{m()}),g.addUpdateListener(name+"SpellInfoView"+a,()=>{m()})}we(()=>{p()});function $(){u.removeUpdateListener(name+"SpellInfoView"+a),g.removeUpdateListener(name+"SpellInfoView"+a)}Ee(()=>{$()});function k(w){se[w?"unshift":"push"](()=>{c=w,t(4,c),t(5,o)})}return n.$$set=w=>{"sys"in w&&t(7,i=w.sys),"edit"in w&&t(0,s=w.edit),"data"in w&&t(8,l=w.data)},[s,d,f,_,c,o,b,i,l,k]}class Ut extends de{constructor(e){super(),re(this,e,xn,Zn,ie,{sys:7,edit:0,data:8})}get sys(){return this.$$.ctx[7]}set sys(e){this.$$set({sys:e}),L()}get edit(){return this.$$.ctx[0]}set edit(e){this.$$set({edit:e}),L()}get data(){return this.$$.ctx[8]}set data(e){this.$$set({data:e}),L()}}oe(Ut,{sys:{},edit:{},data:{}},[],[],!0);function ei(n){let e,t,i,s,l,a,r,o,d,u,g,f,_;return{c(){e=y("div"),t=y("div"),i=G(n[0]),s=H(),l=y("div"),a=y("input"),o=H(),d=y("div"),u=y("div"),g=G(n[3]),h(t,"class","statTitle"),h(a,"class","BoxValue"),h(a,"data-editmode",n[1]),a.disabled=r=!n[1],a.value=n[2],h(a,"type","number"),h(a,"min","0"),h(a,"max","100"),h(l,"class","LargeValue"),h(u,"class","BoxValue"),h(d,"class","SmallValue"),h(e,"class","StatValue")},m(c,b){R(c,e,b),v(e,t),v(t,i),v(e,s),v(e,l),v(l,a),n[8](a),v(e,o),v(e,d),v(d,u),v(u,g),f||(_=U(a,"change",n[5]),f=!0)},p(c,[b]){b&1&&ce(i,c[0]),b&2&&h(a,"data-editmode",c[1]),b&2&&r!==(r=!c[1])&&(a.disabled=r),b&4&&a.value!==c[2]&&(a.value=c[2]),b&8&&ce(g,c[3])},i:T,o:T,d(c){c&&A(e),n[8](null),f=!1,_()}}}function ti(n,e,t){let{name:i}=e,{statNode:s}=e,{modNode:l}=e,{editmode:a=!1}=e,r=s.getValue(),o=l.getValue();const d=ge.getNewKey();we(()=>{s.addUpdateListener("onDerivedNodeUpdate"+d,u),l.addUpdateListener("onDerivedNodeUpdate"+d,u)}),Ee(()=>{s.removeUpdateListener("onDerivedNodeUpdate"+d),l.removeUpdateListener("onDerivedNodeUpdate"+d)});function u(){t(2,r=s.getValue()),t(3,o=l.getValue())}function g(){let c=parseInt(f.value);s.setValue(c)}let f;function _(c){se[c?"unshift":"push"](()=>{f=c,t(4,f)})}return n.$$set=c=>{"name"in c&&t(0,i=c.name),"statNode"in c&&t(6,s=c.statNode),"modNode"in c&&t(7,l=c.modNode),"editmode"in c&&t(1,a=c.editmode)},[i,a,r,o,f,g,s,l,_]}class Pt extends de{constructor(e){super(),re(this,e,ti,ei,ie,{name:0,statNode:6,modNode:7,editmode:1})}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),L()}get statNode(){return this.$$.ctx[6]}set statNode(e){this.$$set({statNode:e}),L()}get modNode(){return this.$$.ctx[7]}set modNode(e){this.$$set({modNode:e}),L()}get editmode(){return this.$$.ctx[1]}set editmode(e){this.$$set({editmode:e}),L()}}oe(Pt,{name:{},statNode:{},modNode:{},editmode:{type:"Boolean"}},[],[],!0);function Ht(n,e,t){const i=n.slice();i[3]=e[t];const s=i[0].getNode("fixed","stats",i[3]);i[4]=s;const l=i[0].getNode("derived","modifiers",i[3]);return i[5]=l,i}function jt(n){let e,t;return e=new Pt({props:{name:n[3],statNode:n[4],modNode:n[5],editmode:n[1]}}),{c(){x(e.$$.fragment)},m(i,s){W(e,i,s),t=!0},p(i,s){const l={};s&1&&(l.statNode=i[4]),s&1&&(l.modNode=i[5]),s&2&&(l.editmode=i[1]),e.$set(l)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function ni(n){let e,t,i=Z(n[2]),s=[];for(let a=0;a<i.length;a+=1)s[a]=jt(Ht(n,i,a));const l=a=>j(s[a],1,1,()=>{s[a]=null});return{c(){e=y("div");for(let a=0;a<s.length;a+=1)s[a].c();h(e,"class","StatsRow")},m(a,r){R(a,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(a,[r]){if(r&7){i=Z(a[2]);let o;for(o=0;o<i.length;o+=1){const d=Ht(a,i,o);s[o]?(s[o].p(d,r),B(s[o],1)):(s[o]=jt(d),s[o].c(),B(s[o],1),s[o].m(e,null))}for(ue(),o=i.length;o<s.length;o+=1)l(o);fe()}},i(a){if(!t){for(let r=0;r<i.length;r+=1)B(s[r]);t=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)j(s[r]);t=!1},d(a){a&&A(e),Ve(s,a)}}}function ii(n,e,t){let{sys:i}=e,{edit:s=!1}=e,l=i.getNodeNames("fixed","stats");return n.$$set=a=>{"sys"in a&&t(0,i=a.sys),"edit"in a&&t(1,s=a.edit)},[i,s,l]}class Kt extends de{constructor(e){super(),re(this,e,ii,ni,ie,{sys:0,edit:1})}get sys(){return this.$$.ctx[0]}set sys(e){this.$$set({sys:e}),L()}get edit(){return this.$$.ctx[1]}set edit(e){this.$$set({edit:e}),L()}}oe(Kt,{sys:{},edit:{type:"Boolean"}},[],[],!0);function Ft(n){let e,t,i=n[1]&&qt(n),s=n[2]&&Jt(n);return{c(){e=y("div"),i&&i.c(),t=H(),s&&s.c(),h(e,"class","ItemManouverOptions")},m(l,a){R(l,e,a),i&&i.m(e,null),v(e,t),s&&s.m(e,null)},p(l,a){l[1]?i?i.p(l,a):(i=qt(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),l[2]?s?s.p(l,a):(s=Jt(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(l){l&&A(e),i&&i.d(),s&&s.d()}}}function qt(n){let e,t,i;return{c(){e=y("div"),e.textContent="Up",h(e,"class","ItemManouverOption"),h(e,"role","none")},m(s,l){R(s,e,l),t||(i=[U(e,"keyup",n[7]),U(e,"click",n[3])],t=!0)},p:T,d(s){s&&A(e),t=!1,z(i)}}}function Jt(n){let e,t,i;return{c(){e=y("div"),e.textContent="Down",h(e,"class","ItemManouverOption"),h(e,"role","none")},m(s,l){R(s,e,l),t||(i=[U(e,"keyup",n[6]),U(e,"click",n[4])],t=!0)},p:T,d(s){s&&A(e),t=!1,z(i)}}}function si(n){let e,t=n[0]&&Ft(n);return{c(){e=y("div"),t&&t.c(),h(e,"class","ItemManouverContainer")},m(i,s){R(i,e,s),t&&t.m(e,null)},p(i,[s]){i[0]?t?t.p(i,s):(t=Ft(i),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:T,o:T,d(i){i&&A(e),t&&t.d()}}}function li(n,e,t){let i=Xe(),{data:s}=e,{editMode:l}=e,{hasUp:a}=e,{hasDown:r}=e;function o(){i("moveUp",s.id)}function d(){i("moveDown",s.id)}function u(f){ve.call(this,n,f)}function g(f){ve.call(this,n,f)}return n.$$set=f=>{"data"in f&&t(5,s=f.data),"editMode"in f&&t(0,l=f.editMode),"hasUp"in f&&t(1,a=f.hasUp),"hasDown"in f&&t(2,r=f.hasDown)},[l,a,r,o,d,s,u,g]}class zt extends de{constructor(e){super(),re(this,e,li,si,ie,{data:5,editMode:0,hasUp:1,hasDown:2})}get data(){return this.$$.ctx[5]}set data(e){this.$$set({data:e}),L()}get editMode(){return this.$$.ctx[0]}set editMode(e){this.$$set({editMode:e}),L()}get hasUp(){return this.$$.ctx[1]}set hasUp(e){this.$$set({hasUp:e}),L()}get hasDown(){return this.$$.ctx[2]}set hasDown(e){this.$$set({hasDown:e}),L()}}oe(zt,{data:{},editMode:{},hasUp:{},hasDown:{}},[],[],!0);function Yt(n){let e,t,i;function s(a){n[7](a)}let l={editMode:!0};return n[0]!==void 0&&(l.data=n[0]),e=new Nt({props:l}),se.push(()=>Se(e,"data",s)),e.$on("optionSelected",n[6]),{c(){x(e.$$.fragment)},m(a,r){W(e,a,r),i=!0},p(a,r){const o={};!t&&r&1&&(t=!0,o.data=a[0],ke(()=>t=!1)),e.$set(o)},i(a){i||(B(e.$$.fragment,a),i=!0)},o(a){j(e.$$.fragment,a),i=!1},d(a){Q(e,a)}}}function Gt(n){let e,t,i;function s(a){n[8](a)}let l={editMode:n[5],hasDown:n[4]!=n[3]-1,hasUp:n[4]!=0};return n[0]!==void 0&&(l.data=n[0]),e=new zt({props:l}),se.push(()=>Se(e,"data",s)),e.$on("moveUp",n[9]),e.$on("moveDown",n[10]),{c(){x(e.$$.fragment)},m(a,r){W(e,a,r),i=!0},p(a,r){const o={};r&32&&(o.editMode=a[5]),r&24&&(o.hasDown=a[4]!=a[3]-1),r&16&&(o.hasUp=a[4]!=0),!t&&r&1&&(t=!0,o.data=a[0],ke(()=>t=!1)),e.$set(o)},i(a){i||(B(e.$$.fragment,a),i=!0)},o(a){j(e.$$.fragment,a),i=!1},d(a){Q(e,a)}}}function ai(n){let e,t,i,s;return t=new Kt({props:{edit:n[1],sys:n[2]}}),t.$on("optionSelected",n[6]),{c(){e=y("div"),x(t.$$.fragment)},m(l,a){R(l,e,a),W(t,e,null),s=!0},p(l,a){const r={};a&2&&(r.edit=l[1]),a&4&&(r.sys=l[2]),t.$set(r)},i(l){s||(B(t.$$.fragment,l),l&&le(()=>{s&&(i||(i=Y(e,ae,{},!0)),i.run(1))}),s=!0)},o(l){j(t.$$.fragment,l),l&&(i||(i=Y(e,ae,{},!1)),i.run(0)),s=!1},d(l){l&&A(e),Q(t),l&&i&&i.end()}}}function ri(n){let e,t,i,s,l;function a(o){n[14](o)}let r={edit:n[1],sys:n[2]};return n[0]!==void 0&&(r.data=n[0]),t=new Ut({props:r}),se.push(()=>Se(t,"data",a)),t.$on("optionSelected",n[6]),{c(){e=y("div"),x(t.$$.fragment)},m(o,d){R(o,e,d),W(t,e,null),l=!0},p(o,d){const u={};d&2&&(u.edit=o[1]),d&4&&(u.sys=o[2]),!i&&d&1&&(i=!0,u.data=o[0],ke(()=>i=!1)),t.$set(u)},i(o){l||(B(t.$$.fragment,o),o&&le(()=>{l&&(s||(s=Y(e,ae,{},!0)),s.run(1))}),l=!0)},o(o){j(t.$$.fragment,o),o&&(s||(s=Y(e,ae,{},!1)),s.run(0)),l=!1},d(o){o&&A(e),Q(t),o&&s&&s.end()}}}function oi(n){let e,t,i,s,l;function a(o){n[13](o)}let r={edit:n[1],sys:n[2]};return n[0]!==void 0&&(r.data=n[0]),t=new Bt({props:r}),se.push(()=>Se(t,"data",a)),t.$on("optionSelected",n[6]),{c(){e=y("div"),x(t.$$.fragment)},m(o,d){R(o,e,d),W(t,e,null),l=!0},p(o,d){const u={};d&2&&(u.edit=o[1]),d&4&&(u.sys=o[2]),!i&&d&1&&(i=!0,u.data=o[0],ke(()=>i=!1)),t.$set(u)},i(o){l||(B(t.$$.fragment,o),o&&le(()=>{l&&(s||(s=Y(e,ae,{},!0)),s.run(1))}),l=!0)},o(o){j(t.$$.fragment,o),o&&(s||(s=Y(e,ae,{},!1)),s.run(0)),l=!1},d(o){o&&A(e),Q(t),o&&s&&s.end()}}}function di(n){let e,t,i,s,l;function a(o){n[12](o)}let r={sys:n[2],editMode:n[1]};return n[0]!==void 0&&(r.data=n[0]),t=new Lt({props:r}),se.push(()=>Se(t,"data",a)),t.$on("optionSelected",n[6]),{c(){e=y("div"),x(t.$$.fragment)},m(o,d){R(o,e,d),W(t,e,null),l=!0},p(o,d){const u={};d&4&&(u.sys=o[2]),d&2&&(u.editMode=o[1]),!i&&d&1&&(i=!0,u.data=o[0],ke(()=>i=!1)),t.$set(u)},i(o){l||(B(t.$$.fragment,o),o&&le(()=>{l&&(s||(s=Y(e,ae,{},!0)),s.run(1))}),l=!0)},o(o){j(t.$$.fragment,o),o&&(s||(s=Y(e,ae,{},!1)),s.run(0)),l=!1},d(o){o&&A(e),Q(t),o&&s&&s.end()}}}function ui(n){let e,t,i,s,l;function a(o){n[11](o)}let r={sys:n[2],editMode:n[1],playMode:!1};return n[0]!==void 0&&(r.data=n[0]),t=new wt({props:r}),se.push(()=>Se(t,"data",a)),t.$on("optionSelected",n[6]),{c(){e=y("div"),x(t.$$.fragment)},m(o,d){R(o,e,d),W(t,e,null),l=!0},p(o,d){const u={};d&4&&(u.sys=o[2]),d&2&&(u.editMode=o[1]),!i&&d&1&&(i=!0,u.data=o[0],ke(()=>i=!1)),t.$set(u)},i(o){l||(B(t.$$.fragment,o),o&&le(()=>{l&&(s||(s=Y(e,ae,{},!0)),s.run(1))}),l=!0)},o(o){j(t.$$.fragment,o),o&&(s||(s=Y(e,ae,{},!1)),s.run(0)),l=!1},d(o){o&&A(e),Q(t),o&&s&&s.end()}}}function fi(n){let e,t,i,s,l,a,r=n[1]&&Yt(n),o=n[3]!=1&&Gt(n);const d=[ui,di,oi,ri,ai],u=[];function g(f,_){return f[0].type==ye.HitPoints?0:f[0].type==ye.ProficiencyBonus?1:f[0].type==ye.SkillProficiencies?2:f[0].type==ye.SpellInfo?3:f[0].type==ye.Stats?4:-1}return~(s=g(n))&&(l=u[s]=d[s](n)),{c(){e=y("div"),r&&r.c(),t=H(),o&&o.c(),i=H(),l&&l.c(),h(e,"data-name","ItemDestributor"),h(e,"class","itemDestributer")},m(f,_){R(f,e,_),r&&r.m(e,null),v(e,t),o&&o.m(e,null),v(e,i),~s&&u[s].m(e,null),a=!0},p(f,[_]){f[1]?r?(r.p(f,_),_&2&&B(r,1)):(r=Yt(f),r.c(),B(r,1),r.m(e,t)):r&&(ue(),j(r,1,1,()=>{r=null}),fe()),f[3]!=1?o?(o.p(f,_),_&8&&B(o,1)):(o=Gt(f),o.c(),B(o,1),o.m(e,i)):o&&(ue(),j(o,1,1,()=>{o=null}),fe());let c=s;s=g(f),s===c?~s&&u[s].p(f,_):(l&&(ue(),j(u[c],1,1,()=>{u[c]=null}),fe()),~s?(l=u[s],l?l.p(f,_):(l=u[s]=d[s](f),l.c()),B(l,1),l.m(e,null)):l=null)},i(f){a||(B(r),B(o),B(l),a=!0)},o(f){j(r),j(o),j(l),a=!1},d(f){f&&A(e),r&&r.d(),o&&o.d(),~s&&u[s].d()}}}function ci(n,e,t){let{data:i}=e,{editMode:s}=e,{sys:l}=e,{length:a}=e,{index:r}=e,{layoutMode:o=!1}=e;function d($){console.log(i),t(0,i)}function u($){i=$,t(0,i)}function g($){i=$,t(0,i)}function f($){ve.call(this,n,$)}function _($){ve.call(this,n,$)}function c($){i=$,t(0,i)}function b($){i=$,t(0,i)}function m($){i=$,t(0,i)}function p($){i=$,t(0,i)}return n.$$set=$=>{"data"in $&&t(0,i=$.data),"editMode"in $&&t(1,s=$.editMode),"sys"in $&&t(2,l=$.sys),"length"in $&&t(3,a=$.length),"index"in $&&t(4,r=$.index),"layoutMode"in $&&t(5,o=$.layoutMode)},[i,s,l,a,r,o,d,u,g,f,_,c,b,m,p]}class Wt extends de{constructor(e){super(),re(this,e,ci,fi,ie,{data:0,editMode:1,sys:2,length:3,index:4,layoutMode:5})}get data(){return this.$$.ctx[0]}set data(e){this.$$set({data:e}),L()}get editMode(){return this.$$.ctx[1]}set editMode(e){this.$$set({editMode:e}),L()}get sys(){return this.$$.ctx[2]}set sys(e){this.$$set({sys:e}),L()}get length(){return this.$$.ctx[3]}set length(e){this.$$set({length:e}),L()}get index(){return this.$$.ctx[4]}set index(e){this.$$set({index:e}),L()}get layoutMode(){return this.$$.ctx[5]}set layoutMode(e){this.$$set({layoutMode:e}),L()}}oe(Wt,{data:{},editMode:{},sys:{},length:{},index:{},layoutMode:{type:"Boolean"}},[],[],!0);function lt(n,e,t){return n.style.animation&&(n.style=null),Tn(n,e,t??{duration:500})}function Qt(n){let e,t,i,s,l=n[4]&&Xt(n),a=n[3]&&Zt(n);return{c(){e=y("div"),l&&l.c(),t=H(),a&&a.c(),h(e,"class","RowColumnOptions"),h(e,"style",n[5])},m(r,o){R(r,e,o),l&&l.m(e,null),v(e,t),a&&a.m(e,null),s=!0},p(r,o){r[4]?l?l.p(r,o):(l=Xt(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),r[3]?a?a.p(r,o):(a=Zt(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(r){s||(r&&le(()=>{s&&(i||(i=Y(e,ae,{},!0)),i.run(1))}),s=!0)},o(r){r&&(i||(i=Y(e,ae,{},!1)),i.run(0)),s=!1},d(r){r&&A(e),l&&l.d(),a&&a.d(),r&&i&&i.end()}}}function Xt(n){let e,t,i,s;return{c(){e=y("div"),t=G(n[1]),h(e,"class","itemOption"),h(e,"role","none")},m(l,a){R(l,e,a),v(e,t),i||(s=[U(e,"keyup",n[10]),U(e,"click",n[11])],i=!0)},p(l,a){a&2&&ce(t,l[1])},d(l){l&&A(e),i=!1,z(s)}}}function Zt(n){let e,t,i,s;return{c(){e=y("div"),t=G(n[2]),h(e,"class","itemOption rem"),h(e,"role","none")},m(l,a){R(l,e,a),v(e,t),i||(s=[U(e,"keyup",n[9]),U(e,"click",n[12])],i=!0)},p(l,a){a&4&&ce(t,l[2])},d(l){l&&A(e),i=!1,z(s)}}}function hi(n){let e,t=n[0]&&Qt(n);return{c(){t&&t.c(),e=gn()},m(i,s){t&&t.m(i,s),R(i,e,s)},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&B(t,1)):(t=Qt(i),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(ue(),j(t,1,1,()=>{t=null}),fe())},i(i){B(t)},o(i){j(t)},d(i){i&&A(e),t&&t.d(i)}}}function gi(n,e,t){let{active:i}=e,{addText:s="Add Item"}=e,{remText:l="Remove This Item"}=e,{offset:a=0}=e,{side:r="left"}=e,{verti:o="bottom"}=e,{onRemove:d=null}=e,{onAdd:u=null}=e,g=r+":"+a+";"+o+":"+a+";";function f(m){ve.call(this,n,m)}function _(m){ve.call(this,n,m)}const c=()=>u(),b=()=>d();return n.$$set=m=>{"active"in m&&t(0,i=m.active),"addText"in m&&t(1,s=m.addText),"remText"in m&&t(2,l=m.remText),"offset"in m&&t(6,a=m.offset),"side"in m&&t(7,r=m.side),"verti"in m&&t(8,o=m.verti),"onRemove"in m&&t(3,d=m.onRemove),"onAdd"in m&&t(4,u=m.onAdd)},[i,s,l,d,u,g,a,r,o,f,_,c,b]}class be extends de{constructor(e){super(),re(this,e,gi,hi,ie,{active:0,addText:1,remText:2,offset:6,side:7,verti:8,onRemove:3,onAdd:4})}get active(){return this.$$.ctx[0]}set active(e){this.$$set({active:e}),L()}get addText(){return this.$$.ctx[1]}set addText(e){this.$$set({addText:e}),L()}get remText(){return this.$$.ctx[2]}set remText(e){this.$$set({remText:e}),L()}get offset(){return this.$$.ctx[6]}set offset(e){this.$$set({offset:e}),L()}get side(){return this.$$.ctx[7]}set side(e){this.$$set({side:e}),L()}get verti(){return this.$$.ctx[8]}set verti(e){this.$$set({verti:e}),L()}get onRemove(){return this.$$.ctx[3]}set onRemove(e){this.$$set({onRemove:e}),L()}get onAdd(){return this.$$.ctx[4]}set onAdd(e){this.$$set({onAdd:e}),L()}}oe(be,{active:{},addText:{},remText:{},offset:{},side:{},verti:{},onRemove:{},onAdd:{}},[],[],!0);function xt(n,e,t){const i=n.slice();return i[45]=e[t],i[47]=t,i}function en(n,e,t){const i=n.slice();return i[48]=e[t],i[50]=t,i}function tn(n,e,t){const i=n.slice();return i[51]=e[t],i[53]=t,i}function nn(n){let e,t;function i(){return n[22](n[45],n[48])}return e=new be({props:{offset:15,active:n[3],remText:"remove this column",onRemove:i}}),{c(){x(e.$$.fragment)},m(s,l){W(e,s,l),t=!0},p(s,l){n=s;const a={};l[0]&8&&(a.active=n[3]),l[0]&32&&(a.onRemove=i),e.$set(a)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function sn(n){let e;return{c(){e=y("div"),_t(e,"height","50px")},m(t,i){R(t,e,i)},d(t){t&&A(e)}}}function ln(n,e){let t,i,s,l,a,r,o,d,u,g=T,f,_,c;function b(){return e[24](e[48],e[51])}i=new be({props:{offset:15,active:e[4],addText:"remove",onRemove:b}}),l=new Wt({props:{data:e[51],editMode:e[1],layoutMode:e[4],sys:e[0],length:e[48].data.length,index:e[53]}}),l.$on("moveUp",e[25]),l.$on("moveDown",e[26]);function m(...w){return e[27](e[51],...w)}function p(...w){return e[28](e[51],...w)}function $(...w){return e[29](e[51],...w)}function k(...w){return e[30](e[51],...w)}return{key:n,first:null,c(){t=y("div"),x(i.$$.fragment),s=H(),x(l.$$.fragment),h(t,"class","Item"),h(t,"data-edit",a=e[1]||e[4]||e[3]),h(t,"data-itemid",r=e[51].id),h(t,"data-edit-active",e[4]),h(t,"data-dragging",o=e[14].isBeingDragged(e[51].id)),h(t,"role","none"),h(t,"draggable",e[4]),this.first=t},m(w,I){R(w,t,I),W(i,t,null),v(t,s),W(l,t,null),f=!0,_||(c=[U(t,"dragstart",m),U(t,"dragend",p),U(t,"drop",$),U(t,"dragleave",k),U(t,"dragover",bi)],_=!0)},p(w,I){e=w;const E={};I[0]&16&&(E.active=e[4]),I[0]&32&&(E.onRemove=b),i.$set(E);const K={};I[0]&32&&(K.data=e[51]),I[0]&2&&(K.editMode=e[1]),I[0]&16&&(K.layoutMode=e[4]),I[0]&1&&(K.sys=e[0]),I[0]&32&&(K.length=e[48].data.length),I[0]&32&&(K.index=e[53]),l.$set(K),(!f||I[0]&26&&a!==(a=e[1]||e[4]||e[3]))&&h(t,"data-edit",a),(!f||I[0]&32&&r!==(r=e[51].id))&&h(t,"data-itemid",r),(!f||I[0]&16)&&h(t,"data-edit-active",e[4]),(!f||I[0]&32&&o!==(o=e[14].isBeingDragged(e[51].id)))&&h(t,"data-dragging",o),(!f||I[0]&16)&&h(t,"draggable",e[4])},r(){u=t.getBoundingClientRect()},f(){We(t),g(),He(t,u)},a(){g(),g=Ge(t,u,lt,{duration:_e})},i(w){f||(B(i.$$.fragment,w),B(l.$$.fragment,w),w&&le(()=>{f&&(d||(d=Y(t,qe,{duration:_e},!0)),d.run(1))}),f=!0)},o(w){j(i.$$.fragment,w),j(l.$$.fragment,w),w&&(d||(d=Y(t,qe,{duration:_e},!1)),d.run(0)),f=!1},d(w){w&&A(t),Q(i),Q(l),w&&d&&d.end(),_=!1,z(c)}}}function an(n,e){let t,i,s,l,a,r=[],o=new Map,d,u,g,f,_,c,b=T,m,p,$,k=e[45].data.length>1&&nn(e);function w(){return e[23](e[48])}s=new be({props:{offset:15,active:e[4],addText:"add a new Item",onAdd:w}});let I=(e[4]||e[3])&&sn(),E=Z(e[48].data);const K=O=>O[51].id;for(let O=0;O<E.length;O+=1){let M=tn(e,E,O),P=K(M);o.set(P,r[O]=ln(P,M))}function J(...O){return e[31](e[48],...O)}function C(...O){return e[32](e[48],...O)}function D(...O){return e[33](e[48],...O)}function F(...O){return e[34](e[48],...O)}function ee(...O){return e[35](e[48],...O)}function te(...O){return e[36](e[48],...O)}return{key:n,first:null,c(){t=y("div"),k&&k.c(),i=H(),x(s.$$.fragment),l=H(),I&&I.c(),a=H();for(let O=0;O<r.length;O+=1)r[O].c();h(t,"class","Column"),h(t,"data-edit",d=e[3]||e[2]),h(t,"data-editpreview",e[4]),h(t,"data-itemid",u=e[48].id),h(t,"data-edit-active",e[3]),h(t,"data-dragging",g=e[13].isBeingDragged(e[48].id)),h(t,"role","none"),h(t,"style",f=`
						${e[3]||e[2]?"margin-bottom:30px":""}
					`),h(t,"draggable",e[3]),this.first=t},m(O,M){R(O,t,M),k&&k.m(t,null),v(t,i),W(s,t,null),v(t,l),I&&I.m(t,null),v(t,a);for(let P=0;P<r.length;P+=1)r[P]&&r[P].m(t,null);m=!0,p||($=[U(t,"dragstart",J),U(t,"dragenter",C),U(t,"dragend",D),U(t,"drop",F),U(t,"dragleave",ee),U(t,"dragover",te)],p=!0)},p(O,M){e=O,e[45].data.length>1?k?(k.p(e,M),M[0]&32&&B(k,1)):(k=nn(e),k.c(),B(k,1),k.m(t,i)):k&&(ue(),j(k,1,1,()=>{k=null}),fe());const P={};if(M[0]&16&&(P.active=e[4]),M[0]&32&&(P.onAdd=w),s.$set(P),e[4]||e[3]?I||(I=sn(),I.c(),I.m(t,a)):I&&(I.d(1),I=null),M[0]&19515){E=Z(e[48].data),ue();for(let q=0;q<r.length;q+=1)r[q].r();r=Ke(r,M,K,1,e,E,o,t,nt,ln,null,tn);for(let q=0;q<r.length;q+=1)r[q].a();fe()}(!m||M[0]&12&&d!==(d=e[3]||e[2]))&&h(t,"data-edit",d),(!m||M[0]&16)&&h(t,"data-editpreview",e[4]),(!m||M[0]&32&&u!==(u=e[48].id))&&h(t,"data-itemid",u),(!m||M[0]&8)&&h(t,"data-edit-active",e[3]),(!m||M[0]&32&&g!==(g=e[13].isBeingDragged(e[48].id)))&&h(t,"data-dragging",g),(!m||M[0]&12&&f!==(f=`
						${e[3]||e[2]?"margin-bottom:30px":""}
					`))&&h(t,"style",f),(!m||M[0]&8)&&h(t,"draggable",e[3])},r(){c=t.getBoundingClientRect()},f(){We(t),b(),He(t,c)},a(){b(),b=Ge(t,c,lt,{duration:_e})},i(O){if(!m){B(k),B(s.$$.fragment,O);for(let M=0;M<E.length;M+=1)B(r[M]);O&&le(()=>{m&&(_||(_=Y(t,qe,{duration:_e},!0)),_.run(1))}),m=!0}},o(O){j(k),j(s.$$.fragment,O);for(let M=0;M<r.length;M+=1)j(r[M]);O&&(_||(_=Y(t,qe,{duration:_e},!1)),_.run(0)),m=!1},d(O){O&&A(t),k&&k.d(),Q(s),I&&I.d();for(let M=0;M<r.length;M+=1)r[M].d();O&&_&&_.end(),p=!1,z($)}}}function rn(n,e){let t,i,s,l,a,r=[],o=new Map,d,u,g,f,_=T,c,b,m;function p(){return e[20](e[45])}i=new be({props:{active:e[3],onAdd:p,addText:"add Column"}});function $(){return e[21](e[45])}l=new be({props:{active:e[2],onRemove:$,remText:"remove this line"}});let k=Z(e[45].data);const w=C=>C[48].id;for(let C=0;C<k.length;C+=1){let D=en(e,k,C),F=w(D);o.set(F,r[C]=an(F,D))}function I(...C){return e[37](e[45],...C)}function E(...C){return e[38](e[45],...C)}function K(...C){return e[39](e[45],...C)}function J(...C){return e[40](e[45],...C)}return{key:n,first:null,c(){t=y("div"),x(i.$$.fragment),s=H(),x(l.$$.fragment),a=H();for(let C=0;C<r.length;C+=1)r[C].c();h(t,"class","Row"),h(t,"data-edit",e[2]),h(t,"data-edit-active",e[2]),h(t,"data-editpreview",e[3]),h(t,"role","none"),h(t,"style",d=`grid-template-columns:${dn(e[45].data.length,"1fr")}`),h(t,"data-rowid",u=e[45].id),h(t,"draggable",e[2]),this.first=t},m(C,D){R(C,t,D),W(i,t,null),v(t,s),W(l,t,null),v(t,a);for(let F=0;F<r.length;F+=1)r[F]&&r[F].m(t,null);c=!0,b||(m=[U(t,"dragstart",I),U(t,"dragenter",E),U(t,"dragend",K),U(t,"dragover",J)],b=!0)},p(C,D){e=C;const F={};D[0]&8&&(F.active=e[3]),D[0]&32&&(F.onAdd=p),i.$set(F);const ee={};if(D[0]&4&&(ee.active=e[2]),D[0]&32&&(ee.onRemove=$),l.$set(ee),D[0]&27711){k=Z(e[45].data),ue();for(let te=0;te<r.length;te+=1)r[te].r();r=Ke(r,D,w,1,e,k,o,t,nt,an,null,en);for(let te=0;te<r.length;te+=1)r[te].a();fe()}(!c||D[0]&4)&&h(t,"data-edit",e[2]),(!c||D[0]&4)&&h(t,"data-edit-active",e[2]),(!c||D[0]&8)&&h(t,"data-editpreview",e[3]),(!c||D[0]&32&&d!==(d=`grid-template-columns:${dn(e[45].data.length,"1fr")}`))&&h(t,"style",d),(!c||D[0]&32&&u!==(u=e[45].id))&&h(t,"data-rowid",u),(!c||D[0]&4)&&h(t,"draggable",e[2])},r(){f=t.getBoundingClientRect()},f(){We(t),_(),He(t,f)},a(){_(),_=Ge(t,f,lt,{duration:_e})},i(C){if(!c){B(i.$$.fragment,C),B(l.$$.fragment,C);for(let D=0;D<k.length;D+=1)B(r[D]);C&&le(()=>{c&&(g||(g=Y(t,$t,{duration:_e,y:100},!0)),g.run(1))}),c=!0}},o(C){j(i.$$.fragment,C),j(l.$$.fragment,C);for(let D=0;D<r.length;D+=1)j(r[D]);C&&(g||(g=Y(t,$t,{duration:_e,y:100},!1)),g.run(0)),c=!1},d(C){C&&A(t),Q(i),Q(l);for(let D=0;D<r.length;D+=1)r[D].d();C&&g&&g.end(),b=!1,z(m)}}}function on(n){let e,t,i;return t=new be({props:{active:n[2],onAdd:n[41],offset:15,addText:"add Line"}}),{c(){e=y("div"),x(t.$$.fragment),h(e,"class","Row"),_t(e,"height","100px")},m(s,l){R(s,e,l),W(t,e,null),i=!0},p(s,l){const a={};l[0]&4&&(a.active=s[2]),l[0]&32&&(a.onAdd=s[41]),t.$set(a)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){s&&A(e),Q(t)}}}function _i(n){let e,t,i,s,l,a="Stop Edit	",r,o,d,u="Layout Row	",g,f,_,c="Layout Col	",b,m,p,$="Layout Items",k,w,I,E=[],K=new Map,J,C,D,F,ee=Z(n[5].data);const te=M=>M[45].id;for(let M=0;M<ee.length;M+=1){let P=xt(n,ee,M),q=te(P);K.set(q,E[M]=rn(q,P))}let O=n[2]&&on(n);return{c(){e=y("div"),t=y("div"),i=y("div"),s=y("div"),l=y("button"),r=G(a),o=H(),d=y("button"),g=G(u),f=H(),_=y("button"),b=G(c),m=H(),p=y("button"),k=G($),I=H();for(let M=0;M<E.length;M+=1)E[M].c();J=H(),O&&O.c(),h(l,"data-active",n[1]),h(d,"data-active",n[2]),h(_,"data-active",n[3]),h(p,"data-active",n[4]),h(s,"class","SheetEditorMenu"),h(s,"data-isopen",w=n[1]||n[2]||n[3]||n[4]),h(i,"class","SheetEditorMenuContainer"),h(t,"class","Sheet"),h(e,"class","theme-light obsidianBody")},m(M,P){R(M,e,P),v(e,t),v(t,i),v(i,s),v(s,l),v(l,r),v(s,o),v(s,d),v(d,g),v(s,f),v(s,_),v(_,b),v(s,m),v(s,p),v(p,k),v(t,I);for(let q=0;q<E.length;q+=1)E[q]&&E[q].m(t,null);v(t,J),O&&O.m(t,null),C=!0,D||(F=[U(l,"click",n[16]),U(d,"click",n[17]),U(_,"click",n[18]),U(p,"click",n[19])],D=!0)},p(M,P){if((!C||P[0]&2)&&h(l,"data-active",M[1]),(!C||P[0]&4)&&h(d,"data-active",M[2]),(!C||P[0]&8)&&h(_,"data-active",M[3]),(!C||P[0]&16)&&h(p,"data-active",M[4]),(!C||P[0]&30&&w!==(w=M[1]||M[2]||M[3]||M[4]))&&h(s,"data-isopen",w),P[0]&31807){ee=Z(M[5].data),ue();for(let q=0;q<E.length;q+=1)E[q].r();E=Ke(E,P,te,1,M,ee,K,t,nt,rn,J,xt);for(let q=0;q<E.length;q+=1)E[q].a();fe()}M[2]?O?(O.p(M,P),P[0]&4&&B(O,1)):(O=on(M),O.c(),B(O,1),O.m(t,null)):O&&(ue(),j(O,1,1,()=>{O=null}),fe())},i(M){if(!C){for(let P=0;P<ee.length;P+=1)B(E[P]);B(O),C=!0}},o(M){for(let P=0;P<E.length;P+=1)j(E[P]);j(O),C=!1},d(M){M&&A(e);for(let P=0;P<E.length;P+=1)E[P].d();O&&O.d(),D=!1,z(F)}}}const Je=220,_e=100;class mi{constructor(e,t){N(this,"data");N(this,"state");N(this,"layerActive");N(this,"isDragging",!1);N(this,"pauseDragg",!1);N(this,"dragID");N(this,"targetID");this.data=e,this.state=t,this.layerActive=t.editLayout_01}moveRow(){this.isDragging&&(!this.dragID||!this.targetID||this.targetID==this.dragID||this.data.update(e=>{let t=this.findIndexOfID(this.dragID),i=this.findIndexOfID(this.targetID);const s=e.data[t];return this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},Je),e.data[t]=e.data[i],e.data[i]=s,e}))}onDragStart(e,t){if(!X(this.layerActive))return;const i=e.target;i.classList.contains("Row")&&(this.isDragging=!0,this.dragID=t,i.setAttribute("data-dragging","true"))}onDragOver(e,t){X(this.layerActive)&&(!this.isDragging||this.pauseDragg||(this.targetID=t,this.moveRow()))}onDragEnd(e,t){if(!X(this.layerActive))return;this.isDragging=!1,this.dragID=null,this.targetID=null,e.target.setAttribute("data-dragging","false")}findIndexOfID(e){return X(this.data).data.findIndex(t=>t.id==e)}}class pi{constructor(e,t){N(this,"data");N(this,"state");N(this,"layerActive");N(this,"isDragging",!1);N(this,"pauseDragg",!1);N(this,"dragTargetElement");N(this,"dragID");N(this,"targetID");N(this,"lastDragId");N(this,"lasttargId");this.data=e,this.state=t,this.layerActive=t.editLayout_02}innerMoveItem(e,t,i){let s,l,a,r;if([s,l]=this.findRowIndexOfID(t),[a,r]=this.findRowIndexOfID(i),s==-1||a==-1)return;const o=e.data[s].data[l],d=e.data[a].data[r];e.data[s].data[l]=d,e.data[a].data[r]=o}moveRowItem(){this.isDragging&&(!this.dragID||this.targetID==this.dragID||this.data.update(e=>this.dragID==this.lastDragId&&this.targetID==this.lasttargId?(this.innerMoveItem(e,this.lasttargId,this.lastDragId),e):(this.lastDragId&&this.lasttargId&&this.innerMoveItem(e,this.lastDragId,this.lasttargId),this.targetID&&this.innerMoveItem(e,this.dragID,this.targetID),this.lastDragId=this.dragID,this.lasttargId=this.targetID,this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},Je),e)))}onDragStart(e,t){if(!X(this.layerActive))return;const i=e.target;i.classList.contains("Column")&&(this.dragTargetElement=i,this.isDragging=!0,this.dragID=t,this.lastDragId=null,this.lasttargId=null,i.setAttribute("data-dragging","true"))}onDragOver(e,t){var i;X(this.layerActive)&&(!this.isDragging||this.pauseDragg||(this.targetID=t,this.moveRowItem(),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","true")))}onDragEnd(e,t){var i;X(this.layerActive)&&(this.isDragging=!1,this.dragID=null,this.targetID=null,e.target.setAttribute("data-dragging","false"),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","false"))}onLeave(e,t){this.targetID=null}findRowIndexOfID(e){let t=-1;return[X(this.data).data.findIndex(s=>{let l=s.data.findIndex(a=>a.id==e);return l!=-1?(t=l,!0):!1}),t]}isBeingDragged(e){return this.dragID==e}}class vi{constructor(e,t){N(this,"data");N(this,"state");N(this,"layerActive");N(this,"isDragging",!1);N(this,"pauseDragg",!1);N(this,"dragTargetElement");N(this,"dragID");N(this,"targetID");N(this,"targetRowId");N(this,"lastDragId");N(this,"lasttargId");N(this,"lasttargRowId");this.data=e,this.state=t,this.layerActive=t.editLayout_03}innerSwitchItem(e,t,i){let s,l,a,r,o,d;if([s,l,a]=this.findIndexsOfID(t),[r,o,d]=this.findIndexsOfID(i),s==-1||r==-1||l==-1||o==-1||a==-1||d==-1)return;const u=e.data[s].data[l].data[a],g=e.data[r].data[o].data[d];e.data[s].data[l].data[a]=g,e.data[r].data[o].data[d]=u}innerMoveItem(e,t,i){let s,l,a,r,o;if([s,l,a]=this.findIndexsOfID(t),[r,o]=this.findColumnIndexsOfID(i),s==-1||r==-1||l==-1||o==-1||a==-1||s==r&&l==o)return;let d=e.data[s].data[l].data.splice(a,1)[0];e.data[r].data[o].data.push(d)}moveRowItem(){this.isDragging&&(!this.dragID||this.targetID==this.dragID||this.targetRowId&&this.data.update(e=>(this.targetRowId&&this.innerMoveItem(e,this.dragID,this.targetRowId),this.lastDragId=this.dragID,this.lasttargId=this.targetID,this.lasttargRowId=null,this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},Je),e)))}requestMoveItemUpDown(e,t){this.data.update(i=>{let s,l,a;[s,l,a]=this.findIndexsOfID(t);let r=a+e;if(r<0)return;if(i.data[s].data[l].data.length-1<r)return console.error("Out of Bounds move, so did not attempt"),i;const o=i.data[s].data[l].data.splice(a,1)[0];return i.data[s].data[l].data.splice(r,0,o),this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},Je),i})}onDragStart(e,t){if(!X(this.layerActive))return;const i=e.target;i.classList.contains("Item")&&(this.dragTargetElement=i,this.isDragging=!0,this.dragID=t,this.lastDragId=null,this.lasttargId=null,i.setAttribute("data-dragging","true"))}onDragOverColumn(e,t){var i;X(this.layerActive)&&(!this.isDragging||this.pauseDragg||(this.targetID=null,this.targetRowId=t,this.moveRowItem(),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","true")))}onDragEnd(e,t){var i;X(this.layerActive)&&(this.isDragging=!1,this.dragID=null,this.targetID=null,e.target.setAttribute("data-dragging","false"),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","false"))}onLeave(e,t){this.targetID=null}findIndexsOfID(e){let t=-1,i=-1,s=-1;return s=X(this.data).data.findIndex(a=>{let r=a.data.findIndex(o=>{let d=o.data.findIndex(u=>u.id==e);return d!=-1?(t=d,!0):!1});return r!=-1?(i=r,!0):!1}),[s,i,t]}findColumnIndexsOfID(e){let t=-1,i=-1;return i=X(this.data).data.findIndex(l=>{let a=l.data.findIndex(r=>r.id==e);return a!=-1?(t=a,!0):!1}),[i,t]}isBeingDragged(e){return this.dragID==e}}class yi{constructor(){N(this,"editMode",Re(!1));N(this,"editLayout_01",Re(!1));N(this,"editLayout_02",Re(!1));N(this,"editLayout_03",Re(!1));this.editMode.subscribe(e=>{e&&(this.editLayout_01.set(!1),this.editLayout_02.set(!1),this.editLayout_03.set(!1))}),this.editLayout_01.subscribe(e=>{e&&(this.editLayout_02.set(!1),this.editLayout_03.set(!1),this.editMode.set(!1))}),this.editLayout_02.subscribe(e=>{e&&(this.editLayout_01.set(!1),this.editLayout_03.set(!1),this.editMode.set(!1))}),this.editLayout_03.subscribe(e=>{e&&(this.editLayout_01.set(!1),this.editLayout_02.set(!1),this.editMode.set(!1))})}}function dn(n,e,t=" "){let i=e;for(let s=0;s<n-1;s++)i+=t,i+=e;return i}const bi=n=>{n.preventDefault()};function $i(n,e,t){let i,s,l,a,r,o=new yi,d=o.editMode;Oe(n,d,S=>t(1,i=S));let u=o.editLayout_01;Oe(n,u,S=>t(2,s=S));let g=o.editLayout_02;Oe(n,g,S=>t(3,l=S));let f=o.editLayout_03;Oe(n,f,S=>t(4,a=S));let{textData:_}=e,{sys:c}=e,b=JSON.parse(_),m=new Ln(b),p=Re(m);Oe(n,p,S=>t(5,r=S));function $(S,V){I.requestMoveItemUpDown(S,V)}we(()=>{});let k=new mi(p,o),w=new pi(p,o),I=new vi(p,o);const E=()=>d.set(!i),K=()=>u.set(!X(u)),J=()=>g.set(!X(g)),C=()=>f.set(!X(f)),D=S=>{S.addColumn(),p.update(V=>V)},F=S=>{p.update(V=>(V.remRow(S.id),V))},ee=(S,V)=>{S.remColumn(V.id),p.update(at=>at)},te=S=>{S.addItem(),p.update(V=>V)},O=(S,V)=>{S.remItem(V.id),p.update(at=>at)},M=S=>{$(-1,S.detail)},P=S=>{$(1,S.detail)},q=(S,V)=>{I.onDragStart(V,S.id)},wi=(S,V)=>{I.onDragEnd(V,S.id)},Di=(S,V)=>{I.onDragEnd(V,S.id)},Ii=(S,V)=>{I.onLeave(V,S.id)},ki=(S,V)=>{w.onDragStart(V,S.id)},Mi=(S,V)=>{w.onDragOver(V,S.id),I.onDragOverColumn(V,S.id)},Si=(S,V)=>{w.onDragEnd(V,S.id)},Ci=(S,V)=>{w.onDragEnd(V,S.id)},Oi=(S,V)=>{w.onLeave(V,S.id)},Ni=(S,V)=>{w.onDragOver(V,S.id),I.onDragOverColumn(V,S.id),V.preventDefault()},Li=(S,V)=>k.onDragStart(V,S.id),Ei=(S,V)=>k.onDragOver(V,S.id),Ai=(S,V)=>k.onDragEnd(V,S.id),Ri=(S,V)=>{k.onDragOver(V,S.id),V.preventDefault()},Bi=()=>{p.update(S=>(S.addRow(),S.data[r.data.length-1].addColumn(),S))};return n.$$set=S=>{"textData"in S&&t(15,_=S.textData),"sys"in S&&t(0,c=S.sys)},[c,i,s,l,a,r,d,u,g,f,p,$,k,w,I,_,E,K,J,C,D,F,ee,te,O,M,P,q,wi,Di,Ii,ki,Mi,Si,Ci,Oi,Ni,Li,Ei,Ai,Ri,Bi]}class un extends de{constructor(e){super(),re(this,e,$i,_i,ie,{textData:15,sys:0},null,[-1,-1])}get textData(){return this.$$.ctx[15]}set textData(e){this.$$set({textData:e}),L()}get sys(){return this.$$.ctx[0]}set sys(e){this.$$set({sys:e}),L()}}return oe(un,{textData:{},sys:{}},[],[],!0),un});
//# sourceMappingURL=components.umd.cjs.map

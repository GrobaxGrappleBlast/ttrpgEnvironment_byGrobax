(function(T,te){typeof exports=="object"&&typeof module<"u"?module.exports=te():typeof define=="function"&&define.amd?define(te):(T=typeof globalThis<"u"?globalThis:T||self,T["<<name>>"]=te())})(this,function(){"use strict";var Ni=Object.defineProperty;var Bi=(T,te,me)=>te in T?Ni(T,te,{enumerable:!0,configurable:!0,writable:!0,value:me}):T[te]=me;var C=(T,te,me)=>Bi(T,typeof te!="symbol"?te+"":te,me);function T(){}const te=n=>n;function me(n){return n()}function rt(){return Object.create(null)}function z(n){n.forEach(me)}function Be(n){return typeof n=="function"}function ne(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function un(n){return Object.keys(n).length===0}function ot(n,...e){if(n==null){for(const i of e)i(void 0);return T}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Z(n){let e;return ot(n,t=>e=t)(),e}function Ce(n,e,t){n.$$.on_destroy.push(ot(e,t))}function dt(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const ut=typeof window<"u";let ft=ut?()=>window.performance.now():()=>Date.now(),Je=ut?n=>requestAnimationFrame(n):T;const we=new Set;function ct(n){we.forEach(e=>{e.c(n)||(we.delete(e),e.f())}),we.size!==0&&Je(ct)}function ht(n){let e;return we.size===0&&Je(ct),{promise:new Promise(t=>{we.add(e={c:n,f:t})}),abort(){we.delete(e)}}}function y(n,e){n.appendChild(e)}function gt(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function fn(n){const e=b("style");return e.textContent="/* empty */",cn(gt(n),e),e.sheet}function cn(n,e){return y(n.head||n,e),e.sheet}function B(n,e,t){n.insertBefore(e,t||null)}function R(n){n.parentNode&&n.parentNode.removeChild(n)}function ze(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function b(n){return document.createElement(n)}function G(n){return document.createTextNode(n)}function K(){return G(" ")}function hn(){return G("")}function P(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function h(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Ve(n){return n===""?null:+n}function gn(n){return Array.from(n.childNodes)}function ue(n,e){e=""+e,n.data!==e&&(n.data=e)}function De(n,e){n.value=e??""}function _t(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function mt(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function _n(n){const e={};return n.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}const Te=new Map;let Ue=0;function mn(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function pn(n,e){const t={stylesheet:fn(e),rules:{}};return Te.set(n,t),t}function Ye(n,e,t,i,s,a,l,r=0){const o=16.666/i;let d=`{
`;for(let p=0;p<=1;p+=o){const v=e+(t-e)*a(p);d+=p*100+`%{${l(v,1-v)}}
`}const u=d+`100% {${l(t,1-t)}}
}`,_=`__svelte_${mn(u)}_${r}`,f=gt(n),{stylesheet:g,rules:c}=Te.get(f)||pn(f,n);c[_]||(c[_]=!0,g.insertRule(`@keyframes ${_} ${u}`,g.cssRules.length));const $=n.style.animation||"";return n.style.animation=`${$?`${$}, `:""}${_} ${i}ms linear ${s}ms 1 both`,Ue+=1,_}function pt(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),s=t.length-i.length;s&&(n.style.animation=i.join(", "),Ue-=s,Ue||vn())}function vn(){Je(()=>{Ue||(Te.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&R(e)}),Te.clear())})}function Ge(n,e,t,i){if(!e)return T;const s=n.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return T;const{delay:a=0,duration:l=300,easing:r=te,start:o=ft()+a,end:d=o+l,tick:u=T,css:_}=t(n,{from:e,to:s},i);let f=!0,g=!1,c;function $(){_&&(c=Ye(n,0,1,l,a,r,_)),a||(g=!0)}function p(){_&&pt(n,c),f=!1}return ht(v=>{if(!g&&v>=o&&(g=!0),g&&v>=d&&(u(1,0),p()),!f)return!1;if(g){const E=v-o,m=0+1*r(E/l);u(m,1-m)}return!0}),$(),u(0,1),p}function We(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:i}=e,s=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=i,Pe(n,s)}}function Pe(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const i=getComputedStyle(n),s=i.transform==="none"?"":i.transform;n.style.transform=`${s} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Le;function Ee(n){Le=n}function Qe(){if(!Le)throw new Error("Function called outside component initialization");return Le}function ke(n){Qe().$$.on_mount.push(n)}function Ae(n){Qe().$$.on_destroy.push(n)}function Xe(){const n=Qe();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const a=mt(e,t,{cancelable:i});return s.slice().forEach(l=>{l.call(n,a)}),!a.defaultPrevented}return!0}}function pe(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const Ie=[],ie=[];let Se=[];const Ze=[],yn=Promise.resolve();let xe=!1;function bn(){xe||(xe=!0,yn.then(L))}function se(n){Se.push(n)}function ve(n){Ze.push(n)}const et=new Set;let Me=0;function L(){if(Me!==0)return;const n=Le;do{try{for(;Me<Ie.length;){const e=Ie[Me];Me++,Ee(e),$n(e.$$)}}catch(e){throw Ie.length=0,Me=0,e}for(Ee(null),Ie.length=0,Me=0;ie.length;)ie.pop()();for(let e=0;e<Se.length;e+=1){const t=Se[e];et.has(t)||(et.add(t),t())}Se.length=0}while(Ie.length);for(;Ze.length;)Ze.pop()();xe=!1,et.clear(),Ee(n)}function $n(n){if(n.fragment!==null){n.update(),z(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(se)}}function wn(n){const e=[],t=[];Se.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),Se=e}let Re;function Dn(){return Re||(Re=Promise.resolve(),Re.then(()=>{Re=null})),Re}function tt(n,e,t){n.dispatchEvent(mt(`${e?"intro":"outro"}${t}`))}const He=new Set;let he;function fe(){he={r:0,c:[],p:he}}function ce(){he.r||z(he.c),he=he.p}function N(n,e){n&&n.i&&(He.delete(n),n.i(e))}function H(n,e,t,i){if(n&&n.o){if(He.has(n))return;He.add(n),he.c.push(()=>{He.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const kn={duration:0};function Y(n,e,t,i){let a=e(n,t,{direction:"both"}),l=i?0:1,r=null,o=null,d=null,u;function _(){d&&pt(n,d)}function f(c,$){const p=c.b-l;return $*=Math.abs(p),{a:l,b:c.b,d:p,duration:$,start:c.start,end:c.start+$,group:c.group}}function g(c){const{delay:$=0,duration:p=300,easing:v=te,tick:E=T,css:m}=a||kn,k={start:ft()+$,b:c};c||(k.group=he,he.r+=1),"inert"in n&&(c?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),r||o?o=k:(m&&(_(),d=Ye(n,l,c,p,$,v,m)),c&&E(0,1),r=f(k,p),se(()=>tt(n,c,"start")),ht(D=>{if(o&&D>o.start&&(r=f(o,p),o=null,tt(n,r.b,"start"),m&&(_(),d=Ye(n,l,r.b,r.duration,0,v,a.css))),r){if(D>=r.end)E(l=r.b,1-l),tt(n,r.b,"end"),o||(r.b?_():--r.group.r||z(r.group.c)),r=null;else if(D>=r.start){const A=D-r.start;l=r.a+r.d*v(A/r.duration),E(l,1-l)}}return!!(r||o)}))}return{run(c){Be(a)?Dn().then(()=>{a=a({direction:c?"in":"out"}),g(c)}):g(c)},end(){_(),r=o=null}}}function ae(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function In(n,e){n.d(1),e.delete(n.key)}function Sn(n,e){H(n,1,1,()=>{e.delete(n.key)})}function nt(n,e){n.f(),Sn(n,e)}function je(n,e,t,i,s,a,l,r,o,d,u,_){let f=n.length,g=a.length,c=f;const $={};for(;c--;)$[n[c].key]=c;const p=[],v=new Map,E=new Map,m=[];for(c=g;c--;){const j=_(s,a,c),J=t(j);let M=l.get(J);M?m.push(()=>M.p(j,e)):(M=d(J,j),M.c()),v.set(J,p[c]=M),J in $&&E.set(J,Math.abs(c-$[J]))}const k=new Set,D=new Set;function A(j){N(j,1),j.m(r,u),l.set(j.key,j),u=j.first,g--}for(;f&&g;){const j=p[g-1],J=n[f-1],M=j.key,w=J.key;j===J?(u=j.first,f--,g--):v.has(w)?!l.has(M)||k.has(M)?A(j):D.has(w)?f--:E.get(M)>E.get(w)?(D.add(M),A(j)):(k.add(w),f--):(o(J,l),f--)}for(;f--;){const j=n[f];v.has(j.key)||o(j,l)}for(;g;)A(p[g-1]);return z(m),p}function ye(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function X(n){n&&n.c()}function W(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),se(()=>{const a=n.$$.on_mount.map(me).filter(Be);n.$$.on_destroy?n.$$.on_destroy.push(...a):z(a),n.$$.on_mount=[]}),s.forEach(se)}function Q(n,e){const t=n.$$;t.fragment!==null&&(wn(t.after_update),z(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Mn(n,e){n.$$.dirty[0]===-1&&(Ie.push(n),bn(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function re(n,e,t,i,s,a,l=null,r=[-1]){const o=Le;Ee(n);const d=n.$$={fragment:null,ctx:[],props:a,update:T,not_equal:s,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:rt(),dirty:r,skip_bound:!1,root:e.target||o.$$.root};l&&l(d.root);let u=!1;if(d.ctx=t?t(n,e.props||{},(_,f,...g)=>{const c=g.length?g[0]:f;return d.ctx&&s(d.ctx[_],d.ctx[_]=c)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](c),u&&Mn(n,_)),f}):[],d.update(),u=!0,z(d.before_update),d.fragment=i?i(d.ctx):!1,e.target){if(e.hydrate){const _=gn(e.target);d.fragment&&d.fragment.l(_),_.forEach(R)}else d.fragment&&d.fragment.c();e.intro&&N(n.$$.fragment),W(n,e.target,e.anchor),L()}Ee(o)}let vt;typeof HTMLElement=="function"&&(vt=class extends HTMLElement{constructor(e,t,i){super();C(this,"$$ctor");C(this,"$$s");C(this,"$$c");C(this,"$$cn",!1);C(this,"$$d",{});C(this,"$$r",!1);C(this,"$$p_d",{});C(this,"$$l",{});C(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,i&&this.attachShadow({mode:"open"})}addEventListener(e,t,i){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const s=this.$$c.$on(e,t);this.$$l_u.set(t,s)}super.addEventListener(e,t,i)}removeEventListener(e,t,i){if(super.removeEventListener(e,t,i),this.$$c){const s=this.$$l_u.get(t);s&&(s(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(a){return()=>{let l;return{c:function(){l=b("slot"),a!=="default"&&h(l,"name",a)},m:function(d,u){B(d,l,u)},d:function(d){d&&R(l)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const t={},i=_n(this);for(const a of this.$$s)a in i&&(t[a]=[e(a)]);for(const a of this.attributes){const l=this.$$g_p(a.name);l in this.$$d||(this.$$d[l]=Ke(l,a.value,this.$$p_d,"toProp"))}for(const a in this.$$p_d)!(a in this.$$d)&&this[a]!==void 0&&(this.$$d[a]=this[a],delete this[a]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const s=()=>{this.$$r=!0;for(const a in this.$$p_d)if(this.$$d[a]=this.$$c.$$.ctx[this.$$c.$$.props[a]],this.$$p_d[a].reflect){const l=Ke(a,this.$$d[a],this.$$p_d,"toAttribute");l==null?this.removeAttribute(this.$$p_d[a].attribute||a):this.setAttribute(this.$$p_d[a].attribute||a,l)}this.$$r=!1};this.$$c.$$.after_update.push(s),s();for(const a in this.$$l)for(const l of this.$$l[a]){const r=this.$$c.$on(a,l);this.$$l_u.set(l,r)}this.$$l={}}}attributeChangedCallback(e,t,i){var s;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Ke(e,i,this.$$p_d,"toProp"),(s=this.$$c)==null||s.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Ke(n,e,t,i){var a;const s=(a=t[n])==null?void 0:a.type;if(e=s==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!t[n])return e;if(i==="toAttribute")switch(s){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(s){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function oe(n,e,t,i,s,a){let l=class extends vt{constructor(){super(n,t,s),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map(r=>(e[r].attribute||r).toLowerCase())}};return Object.keys(e).forEach(r=>{Object.defineProperty(l.prototype,r,{get(){return this.$$c&&r in this.$$c?this.$$c[r]:this.$$d[r]},set(o){var d;o=Ke(r,o,e),this.$$d[r]=o,(d=this.$$c)==null||d.$set({[r]:o})}})}),i.forEach(r=>{Object.defineProperty(l.prototype,r,{get(){var o;return(o=this.$$c)==null?void 0:o[r]}})}),n.element=l,l}class de{constructor(){C(this,"$$");C(this,"$$set")}$destroy(){Q(this,1),this.$destroy=T}$on(e,t){if(!Be(t))return T;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!un(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const On="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(On);class Cn{constructor(){C(this,"keyCounter",0)}getNewKey(){return(this.keyCounter++).toString(16)}}var ge=new Cn;class it{constructor(e="NONE",t="{}"){C(this,"id");C(this,"type");C(this,"data");this.id=ge.getNewKey(),this.type=e,this.data=JSON.parse(t)}}class yt{constructor(e=[]){C(this,"id");C(this,"data",[]);this.id=ge.getNewKey(),this.data=[],e.forEach(t=>{t!=null&&t.data&&t.type?this.data.push(new it(t.type,t.data)):this.data.push(new it)})}addItem(){this.data.push(new it)}remItem(e){let t=this.data.findIndex(i=>i.id==e);if(t==-1){console.error("cant remove column, since id is not present in data");return}this.data.splice(t,1)}}class bt{constructor(e=[]){C(this,"id");C(this,"data",[]);this.id=ge.getNewKey(),this.data=[],e.forEach(t=>{this.data.push(new yt(t.data))})}addColumn(){this.data.push(new yt)}remColumn(e){let t=this.data.findIndex(i=>i.id==e);if(t==-1){console.error("cant remove column, since id is not present in data");return}this.data.splice(t,1)}}class Ln{constructor(e){C(this,"id");C(this,"data",[]);this.id=ge.getNewKey(),this.data=[],e.forEach(t=>{t.data&&this.data.push(new bt(t.data))})}addRow(){this.data.push(new bt)}remRow(e){let t=this.data.findIndex(i=>i.id==e);if(t==-1){console.error("cant remove Row, since id is not present in data");return}this.data.splice(t,1)}}const Oe=[];function Ne(n,e=T){let t;const i=new Set;function s(r){if(ne(n,r)&&(n=r,t)){const o=!Oe.length;for(const d of i)d[1](),Oe.push(d,n);if(o){for(let d=0;d<Oe.length;d+=2)Oe[d][0](Oe[d+1]);Oe.length=0}}}function a(r){s(r(n))}function l(r,o=T){const d=[r,o];return i.add(d),i.size===1&&(t=e(s,a)||T),r(n),()=>{i.delete(d),i.size===0&&t&&(t(),t=null)}}return{set:s,update:a,subscribe:l}}function st(n){const e=n-1;return e*e*e+1}function Fe(n,{delay:e=0,duration:t=400,easing:i=te}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:a=>`opacity: ${a*s}`}}function $t(n,{delay:e=0,duration:t=400,easing:i=st,x:s=0,y:a=0,opacity:l=0}={}){const r=getComputedStyle(n),o=+r.opacity,d=r.transform==="none"?"":r.transform,u=o*(1-l),[_,f]=dt(s),[g,c]=dt(a);return{delay:e,duration:t,easing:i,css:($,p)=>`
			transform: ${d} translate(${(1-$)*_}${f}, ${(1-$)*g}${c});
			opacity: ${o-u*p}`}}function le(n,{delay:e=0,duration:t=400,easing:i=st,axis:s="y"}={}){const a=getComputedStyle(n),l=+a.opacity,r=s==="y"?"height":"width",o=parseFloat(a[r]),d=s==="y"?["top","bottom"]:["left","right"],u=d.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),_=parseFloat(a[`padding${u[0]}`]),f=parseFloat(a[`padding${u[1]}`]),g=parseFloat(a[`margin${u[0]}`]),c=parseFloat(a[`margin${u[1]}`]),$=parseFloat(a[`border${u[0]}Width`]),p=parseFloat(a[`border${u[1]}Width`]);return{delay:e,duration:t,easing:i,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*l};${r}: ${v*o}px;padding-${d[0]}: ${v*_}px;padding-${d[1]}: ${v*f}px;margin-${d[0]}: ${v*g}px;margin-${d[1]}: ${v*c}px;border-${d[0]}-width: ${v*$}px;border-${d[1]}-width: ${v*p}px;`}}var be=(n=>(n.HitPoints="HitPoints",n.ProficiencyBonus="ProficiencyBonus",n.SkillProficiencies="SkillProficiencies",n.SpellInfo="SpellInfo",n.Stats="Stats",n))(be||{});function En(n,{from:e,to:t},i={}){const s=getComputedStyle(n),a=s.transform==="none"?"":s.transform,[l,r]=s.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*l/t.width-(t.left+l),d=e.top+e.height*r/t.height-(t.top+r),{delay:u=0,duration:_=g=>Math.sqrt(g)*120,easing:f=st}=i;return{delay:u,duration:Be(_)?_(Math.sqrt(o*o+d*d)):_,easing:f,css:(g,c)=>{const $=c*o,p=c*d,v=g+c*e.width/t.width,E=g+c*e.height/t.height;return`transform: ${a} translate(${$}px, ${p}px) scale(${v}, ${E});`}}}function wt(n,e,t){const i=n.slice();return i[23]=e[t],i}function Dt(n){let e,t=(n[0]==null?n[2]:n[0])+"",i,s,a,l,r,o;return{c(){e=b("div"),i=G(t),h(e,"class","GrobSelectLabel effect"),h(e,"data-isdisabled",s=n[3]??!1),h(e,"data-iserror",a=n[4]??!1),h(e,"data-selected",l=n[0]??!1),h(e,"tabindex","-1")},m(d,u){B(d,e,u),y(e,i),n[17](e),r||(o=[P(e,"focus",n[13]),P(e,"blur",n[14])],r=!0)},p(d,u){u&5&&t!==(t=(d[0]==null?d[2]:d[0])+"")&&ue(i,t),u&8&&s!==(s=d[3]??!1)&&h(e,"data-isdisabled",s),u&16&&a!==(a=d[4]??!1)&&h(e,"data-iserror",a),u&1&&l!==(l=d[0]??!1)&&h(e,"data-selected",l)},d(d){d&&R(e),n[17](null),r=!1,z(o)}}}function kt(n){let e,t,i,s,a,l=[],r=new Map,o,d,u,_,f,g,c=ae(n[1]);const $=v=>v[23];for(let v=0;v<c.length;v+=1){let E=wt(n,c,v),m=$(E);r.set(m,l[v]=It(m,E))}let p=n[1].length==0&&St();return{c(){var v,E,m,k;e=b("div"),t=b("div"),i=b("div"),a=K();for(let D=0;D<l.length;D+=1)l[D].c();o=K(),p&&p.c(),d=K(),u=b("div"),h(i,"class","Arrow"),h(i,"style",s=`left:${n[12]}px`),h(t,"class","ArrowContainer"),h(u,"class","selectEndTracker"),h(e,"class","SelectPopUp"),h(e,"style",_="width:"+(((v=n[7])==null?void 0:v.width)??100)+"px;left: "+(((E=n[7])==null?void 0:E.x)??0)+"px;top: "+((((m=n[7])==null?void 0:m.y)??0)+(((k=n[7])==null?void 0:k.height)??0)+8)+"px;max-height:"+n[11]+"px")},m(v,E){B(v,e,E),y(e,t),y(t,i),n[18](t),y(e,a);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);y(e,o),p&&p.m(e,null),y(e,d),y(e,u),n[19](u),g=!0},p(v,E){var m,k,D,A;(!g||E&4096&&s!==(s=`left:${v[12]}px`))&&h(i,"style",s),E&32771&&(c=ae(v[1]),l=je(l,E,$,1,v,c,r,e,In,It,o,wt)),v[1].length==0?p||(p=St(),p.c(),p.m(e,d)):p&&(p.d(1),p=null),(!g||E&2176&&_!==(_="width:"+(((m=v[7])==null?void 0:m.width)??100)+"px;left: "+(((k=v[7])==null?void 0:k.x)??0)+"px;top: "+((((D=v[7])==null?void 0:D.y)??0)+(((A=v[7])==null?void 0:A.height)??0)+8)+"px;max-height:"+v[11]+"px"))&&h(e,"style",_)},i(v){g||(v&&se(()=>{g&&(f||(f=Y(e,le,{},!0)),f.run(1))}),g=!0)},o(v){v&&(f||(f=Y(e,le,{},!1)),f.run(0)),g=!1},d(v){v&&R(e),n[18](null);for(let E=0;E<l.length;E+=1)l[E].d();p&&p.d(),n[19](null),v&&f&&f.end()}}}function It(n,e){let t,i=e[23]+"",s,a,l,r,o;return{key:n,first:null,c(){t=b("div"),s=G(i),h(t,"role","none"),h(t,"class","GrobSelectOption"),h(t,"data-selected",a=e[0]==e[23]),h(t,"data-value",l=e[23]),this.first=t},m(d,u){B(d,t,u),y(t,s),r||(o=[P(t,"click",e[15]),P(t,"keydown",e[15])],r=!0)},p(d,u){e=d,u&2&&i!==(i=e[23]+"")&&ue(s,i),u&3&&a!==(a=e[0]==e[23])&&h(t,"data-selected",a),u&2&&l!==(l=e[23])&&h(t,"data-value",l)},d(d){d&&R(t),r=!1,z(o)}}}function St(n){let e;return{c(){e=b("i"),e.textContent="No Options",h(e,"class","GrobSelectInfo")},m(t,i){B(t,e,i)},d(t){t&&R(e)}}}function An(n){let e,t=n[0],i,s,a=Dt(n),l=(n[8]||n[5])&&kt(n);return{c(){e=b("div"),a.c(),i=K(),s=b("div"),l&&l.c(),h(e,"class","GrobSelect")},m(r,o){B(r,e,o),a.m(e,null),y(e,i),y(e,s),l&&l.m(s,null)},p(r,[o]){o&1&&ne(t,t=r[0])?(a.d(1),a=Dt(r),a.c(),a.m(e,i)):a.p(r,o),r[8]||r[5]?l?(l.p(r,o),o&288&&N(l,1)):(l=kt(r),l.c(),N(l,1),l.m(s,null)):l&&(fe(),H(l,1,1,()=>{l=null}),ce())},i(r){N(l)},o(r){H(l)},d(r){r&&R(e),a.d(r),l&&l.d()}}}const Rn=100;function Nn(n,e,t){let i=Xe(),{options:s}=e,{selected:a=null}=e,{unSelectedplaceholder:l="None Selected"}=e,{disabled:r=!1}=e,{isError:o=!1}=e,{forceOpen:d=!1}=e,{maxHeight:u=500}=e,_,f,g=!1,c,$,p=u,v=0;function E(){const w=_.getBoundingClientRect();t(7,f=w),t(8,g=!0),A(),setTimeout(D,Rn)}function m(){setTimeout(()=>{t(8,g=!1)},200)}function k(w){let F=w.target.getAttribute("data-value");a==F?(t(0,a=null),i("onDeselect")):(t(0,a=F),i("onSelect",a))}function D(){let w=$.getBoundingClientRect().bottom,F=c.getBoundingClientRect().bottom,x=window.document.body.getBoundingClientRect().height;if(F>x){let ee=F-x,I=F-w-ee;I<p&&t(11,p=I)}}function A(){let w=_.getBoundingClientRect().width;t(12,v=w/2)}function j(w){ie[w?"unshift":"push"](()=>{_=w,t(6,_)})}function J(w){ie[w?"unshift":"push"](()=>{$=w,t(10,$)})}function M(w){ie[w?"unshift":"push"](()=>{c=w,t(9,c)})}return n.$$set=w=>{"options"in w&&t(1,s=w.options),"selected"in w&&t(0,a=w.selected),"unSelectedplaceholder"in w&&t(2,l=w.unSelectedplaceholder),"disabled"in w&&t(3,r=w.disabled),"isError"in w&&t(4,o=w.isError),"forceOpen"in w&&t(5,d=w.forceOpen),"maxHeight"in w&&t(16,u=w.maxHeight)},[a,s,l,r,o,d,_,f,g,c,$,p,v,E,m,k,u,j,J,M]}class Mt extends de{constructor(e){super(),re(this,e,Nn,An,ne,{options:1,selected:0,unSelectedplaceholder:2,disabled:3,isError:4,forceOpen:5,maxHeight:16})}get options(){return this.$$.ctx[1]}set options(e){this.$$set({options:e}),L()}get selected(){return this.$$.ctx[0]}set selected(e){this.$$set({selected:e}),L()}get unSelectedplaceholder(){return this.$$.ctx[2]}set unSelectedplaceholder(e){this.$$set({unSelectedplaceholder:e}),L()}get disabled(){return this.$$.ctx[3]}set disabled(e){this.$$set({disabled:e}),L()}get isError(){return this.$$.ctx[4]}set isError(e){this.$$set({isError:e}),L()}get forceOpen(){return this.$$.ctx[5]}set forceOpen(e){this.$$set({forceOpen:e}),L()}get maxHeight(){return this.$$.ctx[16]}set maxHeight(e){this.$$set({maxHeight:e}),L()}}oe(Mt,{options:{},selected:{},unSelectedplaceholder:{},disabled:{type:"Boolean"},isError:{type:"Boolean"},forceOpen:{type:"Boolean"},maxHeight:{}},[],[],!0);function Bn(n){let e,t,i,s,a;return s=new Mt({props:{options:n[1],selected:n[2],unSelectedplaceholder:!n[0].type||n[0].type=="NONE"?"Select View Type":"Select a new Type "}}),s.$on("onSelect",n[3]),{c(){e=b("div"),t=b("div"),i=b("div"),X(s.$$.fragment),h(i,"class","ItemOptionBtn "),h(t,"class","ItemOptions"),h(e,"class","ItemOptionsContainer")},m(l,r){B(l,e,r),y(e,t),y(t,i),W(s,i,null),a=!0},p(l,[r]){const o={};r&1&&(o.unSelectedplaceholder=!l[0].type||l[0].type=="NONE"?"Select View Type":"Select a new Type "),s.$set(o)},i(l){a||(N(s.$$.fragment,l),a=!0)},o(l){H(s.$$.fragment,l),a=!1},d(l){l&&R(e),Q(s)}}}function Vn(n,e,t){let i=Xe(),{data:s}=e,{editMode:a}=e,l=Object.keys(be),r=s.type;function o(d){let u=d.detail;t(0,s.type=u,s),i("optionSelected"),console.log("optionSelected"+u)}return n.$$set=d=>{"data"in d&&t(0,s=d.data),"editMode"in d&&t(4,a=d.editMode)},[s,l,r,o,a]}class Ot extends de{constructor(e){super(),re(this,e,Vn,Bn,ne,{data:0,editMode:4})}get data(){return this.$$.ctx[0]}set data(e){this.$$set({data:e}),L()}get editMode(){return this.$$.ctx[4]}set editMode(e){this.$$set({editMode:e}),L()}}oe(Ot,{data:{},editMode:{}},[],[],!0);function Tn(n){let e,t,i;return{c(){e=b("div"),e.textContent="Hit Point Maximum",t=K(),i=b("input"),h(i,"type","number")},m(s,a){B(s,e,a),B(s,t,a),B(s,i,a)},d(s){s&&(R(e),R(t),R(i))}}}function Un(n){let e,t,i;return{c(){e=b("div"),e.textContent="Hit Point Maximum",t=K(),i=b("input"),h(i,"type","number")},m(s,a){B(s,e,a),B(s,t,a),B(s,i,a)},d(s){s&&(R(e),R(t),R(i))}}}function Pn(n){let e,t,i;return{c(){e=b("div"),e.textContent="Hit Point Maximum",t=K(),i=b("input"),h(i,"type","number")},m(s,a){B(s,e,a),B(s,t,a),B(s,i,a)},d(s){s&&(R(e),R(t),R(i))}}}function Hn(n){let e,t,i,s,a,l,r,o,d,u,_,f;function g(p,v){return p[0]?Pn:p[1]?Un:Tn}let c=g(n),$=c(n);return{c(){e=b("div"),t=b("div"),t.textContent="Hit Points",i=K(),s=b("input"),l=K(),r=b("div"),r.textContent="temporary Hit Points",o=K(),d=b("input"),u=K(),$.c(),h(s,"type","number"),s.disabled=a=!n[0],h(d,"type","number")},m(p,v){B(p,e,v),y(e,t),y(e,i),y(e,s),De(s,n[2]),y(e,l),y(e,r),y(e,o),y(e,d),y(e,u),$.m(e,null),_||(f=[P(s,"input",n[6]),P(s,"change",n[3])],_=!0)},p(p,[v]){v&1&&a!==(a=!p[0])&&(s.disabled=a),v&4&&Ve(s.value)!==p[2]&&De(s,p[2]),c!==(c=g(p))&&($.d(1),$=c(p),$&&($.c(),$.m(e,null)))},i:T,o:T,d(p){p&&R(e),$.d(),_=!1,z(f)}}}function jn(n,e,t){let{sys:i}=e,{editMode:s}=e,{playMode:a}=e,{data:l}=e,r=i.fixed.generic["Hit Points"],o=r.getValue();const d=ge.getNewKey();ke(()=>{r.addUpdateListener(name+d+"SvelteView",()=>{t(2,o=r.getValue())})}),Ae(()=>{r.removeUpdateListener(name+d+"SvelteView")});function u(){return r.setValue(o),null}function _(){o=Ve(this.value),t(2,o)}return n.$$set=f=>{"sys"in f&&t(4,i=f.sys),"editMode"in f&&t(0,s=f.editMode),"playMode"in f&&t(1,a=f.playMode),"data"in f&&t(5,l=f.data)},[s,a,o,u,i,l,_]}class Ct extends de{constructor(e){super(),re(this,e,jn,Hn,ne,{sys:4,editMode:0,playMode:1,data:5})}get sys(){return this.$$.ctx[4]}set sys(e){this.$$set({sys:e}),L()}get editMode(){return this.$$.ctx[0]}set editMode(e){this.$$set({editMode:e}),L()}get playMode(){return this.$$.ctx[1]}set playMode(e){this.$$set({playMode:e}),L()}get data(){return this.$$.ctx[5]}set data(e){this.$$set({data:e}),L()}}oe(Ct,{sys:{},editMode:{},playMode:{},data:{}},[],[],!0);function Kn(n){let e,t,i,s,a,l,r;return{c(){e=b("div"),t=b("div"),t.textContent="Proficiency Bonus",i=K(),s=b("input"),h(s,"type","number"),s.disabled=a=!n[0],h(e,"class","ProficiencyBonus")},m(o,d){B(o,e,d),y(e,t),y(e,i),y(e,s),De(s,n[1]),l||(r=[P(s,"input",n[5]),P(s,"change",n[2])],l=!0)},p(o,[d]){d&1&&a!==(a=!o[0])&&(s.disabled=a),d&2&&Ve(s.value)!==o[1]&&De(s,o[1])},i:T,o:T,d(o){o&&R(e),l=!1,z(r)}}}function Fn(n,e,t){let{sys:i}=e,{editMode:s}=e,{data:a}=e,l=i.fixed.generic["Proficiency Bonus"],r=l.getValue();const o=ge.getNewKey();ke(()=>{l.addUpdateListener(name+o+"SvelteView",()=>{t(1,r=l.getValue())})}),Ae(()=>{l.removeUpdateListener(name+o+"SvelteView")});function d(){return l.setValue(r),null}function u(){r=Ve(this.value),t(1,r)}return n.$$set=_=>{"sys"in _&&t(3,i=_.sys),"editMode"in _&&t(0,s=_.editMode),"data"in _&&t(4,a=_.data)},[s,r,d,i,a,u]}class Lt extends de{constructor(e){super(),re(this,e,Fn,Kn,ne,{sys:3,editMode:0,data:4})}get sys(){return this.$$.ctx[3]}set sys(e){this.$$set({sys:e}),L()}get editMode(){return this.$$.ctx[0]}set editMode(e){this.$$set({editMode:e}),L()}get data(){return this.$$.ctx[4]}set data(e){this.$$set({data:e}),L()}}oe(Lt,{sys:{},editMode:{},data:{}},[],[],!0);function qn(n){let e,t,i,s,a,l,r,o,d,u,_,f,g;return{c(){e=b("div"),t=b("div"),i=b("div"),s=K(),a=b("div"),l=b("p"),r=G(n[1]),o=K(),d=b("div"),u=b("p"),_=G(n[3]),h(i,"class","skillproficiencyMark"),h(i,"data-level",n[2]),h(i,"role","none"),h(t,"class","skillproficiencyMarkParent"),h(a,"class","skillproficiencyMarkName"),h(d,"class","skillproficiencyMarkValue"),h(e,"class","skillproficiencyContainer"),h(e,"data-edit",n[0])},m(c,$){B(c,e,$),y(e,t),y(t,i),y(e,s),y(e,a),y(a,l),y(l,r),y(e,o),y(e,d),y(d,u),y(u,_),f||(g=[P(i,"keyup",n[6]),P(i,"click",n[4])],f=!0)},p(c,[$]){$&4&&h(i,"data-level",c[2]),$&2&&ue(r,c[1]),$&8&&ue(_,c[3]),$&1&&h(e,"data-edit",c[0])},i:T,o:T,d(c){c&&R(e),f=!1,z(g)}}}function Jn(n,e,t){let{edit:i}=e,{name:s}=e,{sys:a}=e,l=a.fixed.SkillProficiencies[s],r=a.derived.skillproficiencyBonus[s],o=l.getValue(),d=r.getValue();const u=ge.getNewKey();ke(()=>{l.addUpdateListener(s+u+"SvelteView",()=>{t(2,o=l.getValue())}),r.addUpdateListener(s+u+"SvelteView",()=>{t(3,d=r.getValue())})}),Ae(()=>{l.removeUpdateListener(s+"SvelteView"),r.removeUpdateListener(s+"SvelteView")});function _(){if(!i)return;let g=l.getValue();return g=(g+1)%3,l.setValue(g),null}function f(g){pe.call(this,n,g)}return n.$$set=g=>{"edit"in g&&t(0,i=g.edit),"name"in g&&t(1,s=g.name),"sys"in g&&t(5,a=g.sys)},[i,s,o,d,_,a,f]}class Et extends de{constructor(e){super(),re(this,e,Jn,qn,ne,{edit:0,name:1,sys:5})}get edit(){return this.$$.ctx[0]}set edit(e){this.$$set({edit:e}),L()}get name(){return this.$$.ctx[1]}set name(e){this.$$set({name:e}),L()}get sys(){return this.$$.ctx[5]}set sys(e){this.$$set({sys:e}),L()}}oe(Et,{edit:{},name:{},sys:{}},[],[],!0);function At(n,e,t){const i=n.slice();return i[4]=e[t],i}function Rt(n){let e,t;return e=new Et({props:{edit:n[0],name:n[4],sys:n[1]}}),{c(){X(e.$$.fragment)},m(i,s){W(e,i,s),t=!0},p(i,s){const a={};s&1&&(a.edit=i[0]),s&2&&(a.sys=i[1]),e.$set(a)},i(i){t||(N(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function zn(n){let e,t,i=ae(n[2]),s=[];for(let l=0;l<i.length;l+=1)s[l]=Rt(At(n,i,l));const a=l=>H(s[l],1,1,()=>{s[l]=null});return{c(){e=b("div");for(let l=0;l<s.length;l+=1)s[l].c();h(e,"class","skillproficiencyCollection"),h(e,"data-edit",n[0])},m(l,r){B(l,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(l,[r]){if(r&7){i=ae(l[2]);let o;for(o=0;o<i.length;o+=1){const d=At(l,i,o);s[o]?(s[o].p(d,r),N(s[o],1)):(s[o]=Rt(d),s[o].c(),N(s[o],1),s[o].m(e,null))}for(fe(),o=i.length;o<s.length;o+=1)a(o);ce()}(!t||r&1)&&h(e,"data-edit",l[0])},i(l){if(!t){for(let r=0;r<i.length;r+=1)N(s[r]);t=!0}},o(l){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)H(s[r]);t=!1},d(l){l&&R(e),ze(s,l)}}}function Yn(n,e,t){let{edit:i}=e,{sys:s}=e,{data:a}=e,l=Object.keys(s.fixed.SkillProficiencies);return n.$$set=r=>{"edit"in r&&t(0,i=r.edit),"sys"in r&&t(1,s=r.sys),"data"in r&&t(3,a=r.data)},[i,s,l,a]}class Nt extends de{constructor(e){super(),re(this,e,Yn,zn,ne,{edit:0,sys:1,data:3})}get edit(){return this.$$.ctx[0]}set edit(e){this.$$set({edit:e}),L()}get sys(){return this.$$.ctx[1]}set sys(e){this.$$set({sys:e}),L()}get data(){return this.$$.ctx[3]}set data(e){this.$$set({data:e}),L()}}oe(Nt,{edit:{},sys:{},data:{}},[],[],!0);function Bt(n,e,t){const i=n.slice();return i[16]=e[t],i}function Gn(n){let e;return{c(){e=b("div")},m(t,i){B(t,e,i)},p:T,d(t){t&&R(e)}}}function Wn(n){let e,t,i,s,a=ae(Object.keys(n[0].derived["Spell Bonus"])),l=[];for(let r=0;r<a.length;r+=1)l[r]=Vt(Bt(n,a,r));return{c(){e=b("div"),t=b("select");for(let r=0;r<l.length;r+=1)l[r].c()},m(r,o){B(r,e,o),y(e,t);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(t,null);n[8](t),i||(s=P(t,"change",n[6]),i=!0)},p(r,o){if(o&5){a=ae(Object.keys(r[0].derived["Spell Bonus"]));let d;for(d=0;d<a.length;d+=1){const u=Bt(r,a,d);l[d]?l[d].p(u,o):(l[d]=Vt(u),l[d].c(),l[d].m(t,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=a.length}},d(r){r&&R(e),ze(l,r),n[8](null),i=!1,s()}}}function Vt(n){let e,t=n[16]+"",i,s,a,l;return{c(){e=b("option"),i=G(t),s=K(),e.__value=a=n[16],De(e,e.__value),e.selected=l=n[16]==n[2]},m(r,o){B(r,e,o),y(e,i),y(e,s)},p(r,o){o&1&&t!==(t=r[16]+"")&&ue(i,t),o&1&&a!==(a=r[16])&&(e.__value=a,De(e,e.__value)),o&5&&l!==(l=r[16]==r[2])&&(e.selected=l)},d(r){r&&R(e)}}}function Qn(n){let e,t,i,s,a,l,r,o,d,u,_,f,g,c,$,p,v;function E(D,A){return D[1]?Wn:Gn}let m=E(n),k=m(n);return{c(){e=b("div"),k.c(),t=K(),i=b("div"),s=b("div"),a=G(n[2]),l=K(),r=b("div"),o=b("div"),o.textContent="Spell DC",d=K(),u=b("div"),_=G(n[3]),f=K(),g=b("div"),c=b("div"),c.textContent="Spell Bonus",$=K(),p=b("div"),v=G(n[4]),h(i,"class","spellDCContainer")},m(D,A){B(D,e,A),k.m(e,null),y(e,t),y(e,i),y(i,s),y(s,a),y(i,l),y(i,r),y(r,o),y(r,d),y(r,u),y(u,_),y(i,f),y(i,g),y(g,c),y(g,$),y(g,p),y(p,v)},p(D,[A]){m===(m=E(D))&&k?k.p(D,A):(k.d(1),k=m(D),k&&(k.c(),k.m(e,t))),A&4&&ue(a,D[2]),A&8&&ue(_,D[3]),A&16&&ue(v,D[4])},i:T,o:T,d(D){D&&R(e),k.d()}}}function Xn(n,e,t){let{sys:i}=e,{edit:s}=e,{data:a}=e;const l=ge.getNewKey();let r=a.data;JSON.stringify(r)===JSON.stringify({})&&(r.showStat=Object.keys(i.derived["Spell Bonus"])[0]);let o=r.showStat,d=i.derived["Spell Bonus"][o],u=i.derived["Spell DC"][o],_=d.getValue(),f=u.getValue(),g;function c(){let m=g.value;t(2,o=m),d=i.derived["Spell Bonus"][o],u=i.derived["Spell DC"][o],t(3,_=d.getValue()),t(4,f=u.getValue())}function $(){t(3,_=d.getValue()),t(4,f=u.getValue())}function p(){d.addUpdateListener(name+"SpellInfoView"+l,()=>{$()}),u.addUpdateListener(name+"SpellInfoView"+l,()=>{$()})}ke(()=>{p()});function v(){d.removeUpdateListener(name+"SpellInfoView"+l),u.removeUpdateListener(name+"SpellInfoView"+l)}Ae(()=>{v()});function E(m){ie[m?"unshift":"push"](()=>{g=m,t(5,g),t(0,i)})}return n.$$set=m=>{"sys"in m&&t(0,i=m.sys),"edit"in m&&t(1,s=m.edit),"data"in m&&t(7,a=m.data)},[i,s,o,_,f,g,c,a,E]}class Tt extends de{constructor(e){super(),re(this,e,Xn,Qn,ne,{sys:0,edit:1,data:7})}get sys(){return this.$$.ctx[0]}set sys(e){this.$$set({sys:e}),L()}get edit(){return this.$$.ctx[1]}set edit(e){this.$$set({edit:e}),L()}get data(){return this.$$.ctx[7]}set data(e){this.$$set({data:e}),L()}}oe(Tt,{sys:{},edit:{},data:{}},[],[],!0);function Zn(n){let e,t,i,s,a,l,r,o,d,u,_,f,g;return{c(){e=b("div"),t=b("div"),i=G(n[0]),s=K(),a=b("div"),l=b("input"),o=K(),d=b("div"),u=b("div"),_=G(n[3]),h(l,"class","BoxValue"),h(l,"data-editmode",n[1]),l.disabled=r=!n[1],l.value=n[2],h(l,"type","number"),h(l,"min","0"),h(l,"max","100"),h(a,"class","LargeValue"),h(u,"class","BoxValue"),h(d,"class","SmallValue"),h(e,"class","StatValue")},m(c,$){B(c,e,$),y(e,t),y(t,i),y(e,s),y(e,a),y(a,l),n[8](l),y(e,o),y(e,d),y(d,u),y(u,_),f||(g=P(l,"change",n[5]),f=!0)},p(c,[$]){$&1&&ue(i,c[0]),$&2&&h(l,"data-editmode",c[1]),$&2&&r!==(r=!c[1])&&(l.disabled=r),$&4&&l.value!==c[2]&&(l.value=c[2]),$&8&&ue(_,c[3])},i:T,o:T,d(c){c&&R(e),n[8](null),f=!1,g()}}}function xn(n,e,t){let{name:i}=e,{statNode:s}=e,{modNode:a}=e,{editmode:l=!1}=e,r=s.getValue(),o=a.getValue();const d=ge.getNewKey();ke(()=>{s.addUpdateListener("onDerivedNodeUpdate"+d,u),a.addUpdateListener("onDerivedNodeUpdate"+d,u)}),Ae(()=>{s.removeUpdateListener("onDerivedNodeUpdate"+d),a.removeUpdateListener("onDerivedNodeUpdate"+d)});function u(){t(2,r=s.getValue()),t(3,o=a.getValue())}function _(){let c=parseInt(f.value);s.setValue(c)}let f;function g(c){ie[c?"unshift":"push"](()=>{f=c,t(4,f)})}return n.$$set=c=>{"name"in c&&t(0,i=c.name),"statNode"in c&&t(6,s=c.statNode),"modNode"in c&&t(7,a=c.modNode),"editmode"in c&&t(1,l=c.editmode)},[i,l,r,o,f,_,s,a,g]}class Ut extends de{constructor(e){super(),re(this,e,xn,Zn,ne,{name:0,statNode:6,modNode:7,editmode:1})}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),L()}get statNode(){return this.$$.ctx[6]}set statNode(e){this.$$set({statNode:e}),L()}get modNode(){return this.$$.ctx[7]}set modNode(e){this.$$set({modNode:e}),L()}get editmode(){return this.$$.ctx[1]}set editmode(e){this.$$set({editmode:e}),L()}}oe(Ut,{name:{},statNode:{},modNode:{},editmode:{type:"Boolean"}},[],[],!0);function Pt(n,e,t){const i=n.slice();i[4]=e[t];const s=i[2][i[4]];i[5]=s;const a=i[0].derived.modifiers[i[4]];return i[6]=a,i}function Ht(n){let e,t;return e=new Ut({props:{name:n[4],statNode:n[5],modNode:n[6],editmode:n[1]}}),{c(){X(e.$$.fragment)},m(i,s){W(e,i,s),t=!0},p(i,s){const a={};s&1&&(a.modNode=i[6]),s&2&&(a.editmode=i[1]),e.$set(a)},i(i){t||(N(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function ei(n){let e,t,i=ae(Object.keys(n[2])),s=[];for(let l=0;l<i.length;l+=1)s[l]=Ht(Pt(n,i,l));const a=l=>H(s[l],1,1,()=>{s[l]=null});return{c(){e=b("div");for(let l=0;l<s.length;l+=1)s[l].c();h(e,"class","StatsRow")},m(l,r){B(l,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(l,[r]){if(r&7){i=ae(Object.keys(l[2]));let o;for(o=0;o<i.length;o+=1){const d=Pt(l,i,o);s[o]?(s[o].p(d,r),N(s[o],1)):(s[o]=Ht(d),s[o].c(),N(s[o],1),s[o].m(e,null))}for(fe(),o=i.length;o<s.length;o+=1)a(o);ce()}},i(l){if(!t){for(let r=0;r<i.length;r+=1)N(s[r]);t=!0}},o(l){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)H(s[r]);t=!1},d(l){l&&R(e),ze(s,l)}}}function ti(n,e,t){let{sys:i}=e,{data:s}=e,{edit:a=!1}=e,l=i.fixed.stats;return n.$$set=r=>{"sys"in r&&t(0,i=r.sys),"data"in r&&t(3,s=r.data),"edit"in r&&t(1,a=r.edit)},[i,a,l,s]}class jt extends de{constructor(e){super(),re(this,e,ti,ei,ne,{sys:0,data:3,edit:1})}get sys(){return this.$$.ctx[0]}set sys(e){this.$$set({sys:e}),L()}get data(){return this.$$.ctx[3]}set data(e){this.$$set({data:e}),L()}get edit(){return this.$$.ctx[1]}set edit(e){this.$$set({edit:e}),L()}}oe(jt,{sys:{},data:{},edit:{type:"Boolean"}},[],[],!0);function Kt(n){let e,t,i=n[1]&&Ft(n),s=n[2]&&qt(n);return{c(){e=b("div"),i&&i.c(),t=K(),s&&s.c(),h(e,"class","ItemManouverOptions")},m(a,l){B(a,e,l),i&&i.m(e,null),y(e,t),s&&s.m(e,null)},p(a,l){a[1]?i?i.p(a,l):(i=Ft(a),i.c(),i.m(e,t)):i&&(i.d(1),i=null),a[2]?s?s.p(a,l):(s=qt(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(a){a&&R(e),i&&i.d(),s&&s.d()}}}function Ft(n){let e,t,i;return{c(){e=b("div"),e.textContent="Up",h(e,"class","ItemManouverOption"),h(e,"role","none")},m(s,a){B(s,e,a),t||(i=[P(e,"keyup",n[7]),P(e,"click",n[3])],t=!0)},p:T,d(s){s&&R(e),t=!1,z(i)}}}function qt(n){let e,t,i;return{c(){e=b("div"),e.textContent="Down",h(e,"class","ItemManouverOption"),h(e,"role","none")},m(s,a){B(s,e,a),t||(i=[P(e,"keyup",n[6]),P(e,"click",n[4])],t=!0)},p:T,d(s){s&&R(e),t=!1,z(i)}}}function ni(n){let e,t=n[0]&&Kt(n);return{c(){e=b("div"),t&&t.c(),h(e,"class","ItemManouverContainer")},m(i,s){B(i,e,s),t&&t.m(e,null)},p(i,[s]){i[0]?t?t.p(i,s):(t=Kt(i),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:T,o:T,d(i){i&&R(e),t&&t.d()}}}function ii(n,e,t){let i=Xe(),{data:s}=e,{editMode:a}=e,{hasUp:l}=e,{hasDown:r}=e;function o(){i("moveUp",s.id)}function d(){i("moveDown",s.id)}function u(f){pe.call(this,n,f)}function _(f){pe.call(this,n,f)}return n.$$set=f=>{"data"in f&&t(5,s=f.data),"editMode"in f&&t(0,a=f.editMode),"hasUp"in f&&t(1,l=f.hasUp),"hasDown"in f&&t(2,r=f.hasDown)},[a,l,r,o,d,s,u,_]}class Jt extends de{constructor(e){super(),re(this,e,ii,ni,ne,{data:5,editMode:0,hasUp:1,hasDown:2})}get data(){return this.$$.ctx[5]}set data(e){this.$$set({data:e}),L()}get editMode(){return this.$$.ctx[0]}set editMode(e){this.$$set({editMode:e}),L()}get hasUp(){return this.$$.ctx[1]}set hasUp(e){this.$$set({hasUp:e}),L()}get hasDown(){return this.$$.ctx[2]}set hasDown(e){this.$$set({hasDown:e}),L()}}oe(Jt,{data:{},editMode:{},hasUp:{},hasDown:{}},[],[],!0);function zt(n){let e,t,i;function s(l){n[7](l)}let a={editMode:!0};return n[0]!==void 0&&(a.data=n[0]),e=new Ot({props:a}),ie.push(()=>ye(e,"data",s)),e.$on("optionSelected",n[6]),{c(){X(e.$$.fragment)},m(l,r){W(e,l,r),i=!0},p(l,r){const o={};!t&&r&1&&(t=!0,o.data=l[0],ve(()=>t=!1)),e.$set(o)},i(l){i||(N(e.$$.fragment,l),i=!0)},o(l){H(e.$$.fragment,l),i=!1},d(l){Q(e,l)}}}function Yt(n){let e,t,i;function s(l){n[8](l)}let a={editMode:n[5],hasDown:n[4]!=n[3]-1,hasUp:n[4]!=0};return n[0]!==void 0&&(a.data=n[0]),e=new Jt({props:a}),ie.push(()=>ye(e,"data",s)),e.$on("moveUp",n[9]),e.$on("moveDown",n[10]),{c(){X(e.$$.fragment)},m(l,r){W(e,l,r),i=!0},p(l,r){const o={};r&32&&(o.editMode=l[5]),r&24&&(o.hasDown=l[4]!=l[3]-1),r&16&&(o.hasUp=l[4]!=0),!t&&r&1&&(t=!0,o.data=l[0],ve(()=>t=!1)),e.$set(o)},i(l){i||(N(e.$$.fragment,l),i=!0)},o(l){H(e.$$.fragment,l),i=!1},d(l){Q(e,l)}}}function si(n){let e,t,i,s,a;function l(o){n[15](o)}let r={edit:n[1],sys:n[2]};return n[0]!==void 0&&(r.data=n[0]),t=new jt({props:r}),ie.push(()=>ye(t,"data",l)),t.$on("optionSelected",n[6]),{c(){e=b("div"),X(t.$$.fragment)},m(o,d){B(o,e,d),W(t,e,null),a=!0},p(o,d){const u={};d&2&&(u.edit=o[1]),d&4&&(u.sys=o[2]),!i&&d&1&&(i=!0,u.data=o[0],ve(()=>i=!1)),t.$set(u)},i(o){a||(N(t.$$.fragment,o),o&&se(()=>{a&&(s||(s=Y(e,le,{},!0)),s.run(1))}),a=!0)},o(o){H(t.$$.fragment,o),o&&(s||(s=Y(e,le,{},!1)),s.run(0)),a=!1},d(o){o&&R(e),Q(t),o&&s&&s.end()}}}function ai(n){let e,t,i,s,a;function l(o){n[14](o)}let r={edit:n[1],sys:n[2]};return n[0]!==void 0&&(r.data=n[0]),t=new Tt({props:r}),ie.push(()=>ye(t,"data",l)),t.$on("optionSelected",n[6]),{c(){e=b("div"),X(t.$$.fragment)},m(o,d){B(o,e,d),W(t,e,null),a=!0},p(o,d){const u={};d&2&&(u.edit=o[1]),d&4&&(u.sys=o[2]),!i&&d&1&&(i=!0,u.data=o[0],ve(()=>i=!1)),t.$set(u)},i(o){a||(N(t.$$.fragment,o),o&&se(()=>{a&&(s||(s=Y(e,le,{},!0)),s.run(1))}),a=!0)},o(o){H(t.$$.fragment,o),o&&(s||(s=Y(e,le,{},!1)),s.run(0)),a=!1},d(o){o&&R(e),Q(t),o&&s&&s.end()}}}function li(n){let e,t,i,s,a;function l(o){n[13](o)}let r={edit:n[1],sys:n[2]};return n[0]!==void 0&&(r.data=n[0]),t=new Nt({props:r}),ie.push(()=>ye(t,"data",l)),t.$on("optionSelected",n[6]),{c(){e=b("div"),X(t.$$.fragment)},m(o,d){B(o,e,d),W(t,e,null),a=!0},p(o,d){const u={};d&2&&(u.edit=o[1]),d&4&&(u.sys=o[2]),!i&&d&1&&(i=!0,u.data=o[0],ve(()=>i=!1)),t.$set(u)},i(o){a||(N(t.$$.fragment,o),o&&se(()=>{a&&(s||(s=Y(e,le,{},!0)),s.run(1))}),a=!0)},o(o){H(t.$$.fragment,o),o&&(s||(s=Y(e,le,{},!1)),s.run(0)),a=!1},d(o){o&&R(e),Q(t),o&&s&&s.end()}}}function ri(n){let e,t,i,s,a;function l(o){n[12](o)}let r={sys:n[2],editMode:n[1]};return n[0]!==void 0&&(r.data=n[0]),t=new Lt({props:r}),ie.push(()=>ye(t,"data",l)),t.$on("optionSelected",n[6]),{c(){e=b("div"),X(t.$$.fragment)},m(o,d){B(o,e,d),W(t,e,null),a=!0},p(o,d){const u={};d&4&&(u.sys=o[2]),d&2&&(u.editMode=o[1]),!i&&d&1&&(i=!0,u.data=o[0],ve(()=>i=!1)),t.$set(u)},i(o){a||(N(t.$$.fragment,o),o&&se(()=>{a&&(s||(s=Y(e,le,{},!0)),s.run(1))}),a=!0)},o(o){H(t.$$.fragment,o),o&&(s||(s=Y(e,le,{},!1)),s.run(0)),a=!1},d(o){o&&R(e),Q(t),o&&s&&s.end()}}}function oi(n){let e,t,i,s,a;function l(o){n[11](o)}let r={sys:n[2],editMode:n[1],playMode:!1};return n[0]!==void 0&&(r.data=n[0]),t=new Ct({props:r}),ie.push(()=>ye(t,"data",l)),t.$on("optionSelected",n[6]),{c(){e=b("div"),X(t.$$.fragment)},m(o,d){B(o,e,d),W(t,e,null),a=!0},p(o,d){const u={};d&4&&(u.sys=o[2]),d&2&&(u.editMode=o[1]),!i&&d&1&&(i=!0,u.data=o[0],ve(()=>i=!1)),t.$set(u)},i(o){a||(N(t.$$.fragment,o),o&&se(()=>{a&&(s||(s=Y(e,le,{},!0)),s.run(1))}),a=!0)},o(o){H(t.$$.fragment,o),o&&(s||(s=Y(e,le,{},!1)),s.run(0)),a=!1},d(o){o&&R(e),Q(t),o&&s&&s.end()}}}function di(n){let e,t,i,s,a,l,r=n[1]&&zt(n),o=n[3]!=1&&Yt(n);const d=[oi,ri,li,ai,si],u=[];function _(f,g){return f[0].type==be.HitPoints?0:f[0].type==be.ProficiencyBonus?1:f[0].type==be.SkillProficiencies?2:f[0].type==be.SpellInfo?3:f[0].type==be.Stats?4:-1}return~(s=_(n))&&(a=u[s]=d[s](n)),{c(){e=b("div"),r&&r.c(),t=K(),o&&o.c(),i=K(),a&&a.c()},m(f,g){B(f,e,g),r&&r.m(e,null),y(e,t),o&&o.m(e,null),y(e,i),~s&&u[s].m(e,null),l=!0},p(f,[g]){f[1]?r?(r.p(f,g),g&2&&N(r,1)):(r=zt(f),r.c(),N(r,1),r.m(e,t)):r&&(fe(),H(r,1,1,()=>{r=null}),ce()),f[3]!=1?o?(o.p(f,g),g&8&&N(o,1)):(o=Yt(f),o.c(),N(o,1),o.m(e,i)):o&&(fe(),H(o,1,1,()=>{o=null}),ce());let c=s;s=_(f),s===c?~s&&u[s].p(f,g):(a&&(fe(),H(u[c],1,1,()=>{u[c]=null}),ce()),~s?(a=u[s],a?a.p(f,g):(a=u[s]=d[s](f),a.c()),N(a,1),a.m(e,null)):a=null)},i(f){l||(N(r),N(o),N(a),l=!0)},o(f){H(r),H(o),H(a),l=!1},d(f){f&&R(e),r&&r.d(),o&&o.d(),~s&&u[s].d()}}}function ui(n,e,t){let{data:i}=e,{editMode:s}=e,{sys:a}=e,{length:l}=e,{index:r}=e,{layoutMode:o=!1}=e;function d(){t(0,i)}function u(m){i=m,t(0,i)}function _(m){i=m,t(0,i)}function f(m){pe.call(this,n,m)}function g(m){pe.call(this,n,m)}function c(m){i=m,t(0,i)}function $(m){i=m,t(0,i)}function p(m){i=m,t(0,i)}function v(m){i=m,t(0,i)}function E(m){i=m,t(0,i)}return n.$$set=m=>{"data"in m&&t(0,i=m.data),"editMode"in m&&t(1,s=m.editMode),"sys"in m&&t(2,a=m.sys),"length"in m&&t(3,l=m.length),"index"in m&&t(4,r=m.index),"layoutMode"in m&&t(5,o=m.layoutMode)},[i,s,a,l,r,o,d,u,_,f,g,c,$,p,v,E]}class Gt extends de{constructor(e){super(),re(this,e,ui,di,ne,{data:0,editMode:1,sys:2,length:3,index:4,layoutMode:5})}get data(){return this.$$.ctx[0]}set data(e){this.$$set({data:e}),L()}get editMode(){return this.$$.ctx[1]}set editMode(e){this.$$set({editMode:e}),L()}get sys(){return this.$$.ctx[2]}set sys(e){this.$$set({sys:e}),L()}get length(){return this.$$.ctx[3]}set length(e){this.$$set({length:e}),L()}get index(){return this.$$.ctx[4]}set index(e){this.$$set({index:e}),L()}get layoutMode(){return this.$$.ctx[5]}set layoutMode(e){this.$$set({layoutMode:e}),L()}}oe(Gt,{data:{},editMode:{},sys:{},length:{},index:{},layoutMode:{type:"Boolean"}},[],[],!0);function at(n,e,t){return n.style.animation&&(n.style=null),En(n,e,t??{duration:500})}function Wt(n){let e,t,i,s,a=n[4]&&Qt(n),l=n[3]&&Xt(n);return{c(){e=b("div"),a&&a.c(),t=K(),l&&l.c(),h(e,"class","RowColumnOptions"),h(e,"style",n[5])},m(r,o){B(r,e,o),a&&a.m(e,null),y(e,t),l&&l.m(e,null),s=!0},p(r,o){r[4]?a?a.p(r,o):(a=Qt(r),a.c(),a.m(e,t)):a&&(a.d(1),a=null),r[3]?l?l.p(r,o):(l=Xt(r),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(r){s||(r&&se(()=>{s&&(i||(i=Y(e,le,{},!0)),i.run(1))}),s=!0)},o(r){r&&(i||(i=Y(e,le,{},!1)),i.run(0)),s=!1},d(r){r&&R(e),a&&a.d(),l&&l.d(),r&&i&&i.end()}}}function Qt(n){let e,t,i,s;return{c(){e=b("div"),t=G(n[1]),h(e,"class","itemOption"),h(e,"role","none")},m(a,l){B(a,e,l),y(e,t),i||(s=[P(e,"keyup",n[10]),P(e,"click",n[11])],i=!0)},p(a,l){l&2&&ue(t,a[1])},d(a){a&&R(e),i=!1,z(s)}}}function Xt(n){let e,t,i,s;return{c(){e=b("div"),t=G(n[2]),h(e,"class","itemOption rem"),h(e,"role","none")},m(a,l){B(a,e,l),y(e,t),i||(s=[P(e,"keyup",n[9]),P(e,"click",n[12])],i=!0)},p(a,l){l&4&&ue(t,a[2])},d(a){a&&R(e),i=!1,z(s)}}}function fi(n){let e,t=n[0]&&Wt(n);return{c(){t&&t.c(),e=hn()},m(i,s){t&&t.m(i,s),B(i,e,s)},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&N(t,1)):(t=Wt(i),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(fe(),H(t,1,1,()=>{t=null}),ce())},i(i){N(t)},o(i){H(t)},d(i){i&&R(e),t&&t.d(i)}}}function ci(n,e,t){let{active:i}=e,{addText:s="Add Item"}=e,{remText:a="Remove This Item"}=e,{offset:l=0}=e,{side:r="left"}=e,{verti:o="bottom"}=e,{onRemove:d=null}=e,{onAdd:u=null}=e,_=r+":"+l+";"+o+":"+l+";";function f(p){pe.call(this,n,p)}function g(p){pe.call(this,n,p)}const c=()=>u(),$=()=>d();return n.$$set=p=>{"active"in p&&t(0,i=p.active),"addText"in p&&t(1,s=p.addText),"remText"in p&&t(2,a=p.remText),"offset"in p&&t(6,l=p.offset),"side"in p&&t(7,r=p.side),"verti"in p&&t(8,o=p.verti),"onRemove"in p&&t(3,d=p.onRemove),"onAdd"in p&&t(4,u=p.onAdd)},[i,s,a,d,u,_,l,r,o,f,g,c,$]}class $e extends de{constructor(e){super(),re(this,e,ci,fi,ne,{active:0,addText:1,remText:2,offset:6,side:7,verti:8,onRemove:3,onAdd:4})}get active(){return this.$$.ctx[0]}set active(e){this.$$set({active:e}),L()}get addText(){return this.$$.ctx[1]}set addText(e){this.$$set({addText:e}),L()}get remText(){return this.$$.ctx[2]}set remText(e){this.$$set({remText:e}),L()}get offset(){return this.$$.ctx[6]}set offset(e){this.$$set({offset:e}),L()}get side(){return this.$$.ctx[7]}set side(e){this.$$set({side:e}),L()}get verti(){return this.$$.ctx[8]}set verti(e){this.$$set({verti:e}),L()}get onRemove(){return this.$$.ctx[3]}set onRemove(e){this.$$set({onRemove:e}),L()}get onAdd(){return this.$$.ctx[4]}set onAdd(e){this.$$set({onAdd:e}),L()}}oe($e,{active:{},addText:{},remText:{},offset:{},side:{},verti:{},onRemove:{},onAdd:{}},[],[],!0);function Zt(n,e,t){const i=n.slice();return i[45]=e[t],i[47]=t,i}function xt(n,e,t){const i=n.slice();return i[48]=e[t],i[50]=t,i}function en(n,e,t){const i=n.slice();return i[51]=e[t],i[53]=t,i}function tn(n){let e,t;function i(){return n[22](n[45],n[48])}return e=new $e({props:{offset:15,active:n[3],remText:"remove this column",onRemove:i}}),{c(){X(e.$$.fragment)},m(s,a){W(e,s,a),t=!0},p(s,a){n=s;const l={};a[0]&8&&(l.active=n[3]),a[0]&32&&(l.onRemove=i),e.$set(l)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function nn(n){let e;return{c(){e=b("div"),_t(e,"height","50px")},m(t,i){B(t,e,i)},d(t){t&&R(e)}}}function sn(n,e){let t,i,s,a,l,r,o,d,u,_=T,f,g,c;function $(){return e[24](e[48],e[51])}i=new $e({props:{offset:15,active:e[4],addText:"remove",onRemove:$}}),a=new Gt({props:{data:e[51],editMode:e[1],layoutMode:e[4],sys:e[0],length:e[48].data.length,index:e[53]}}),a.$on("moveUp",e[25]),a.$on("moveDown",e[26]);function p(...k){return e[27](e[51],...k)}function v(...k){return e[28](e[51],...k)}function E(...k){return e[29](e[51],...k)}function m(...k){return e[30](e[51],...k)}return{key:n,first:null,c(){t=b("div"),X(i.$$.fragment),s=K(),X(a.$$.fragment),h(t,"class","Item"),h(t,"data-edit",l=e[1]||e[4]||e[3]),h(t,"data-itemid",r=e[51].id),h(t,"data-edit-active",e[4]),h(t,"data-dragging",o=e[14].isBeingDragged(e[51].id)),h(t,"role","none"),h(t,"draggable",e[4]),this.first=t},m(k,D){B(k,t,D),W(i,t,null),y(t,s),W(a,t,null),f=!0,g||(c=[P(t,"dragstart",p),P(t,"dragend",v),P(t,"drop",E),P(t,"dragleave",m),P(t,"dragover",vi)],g=!0)},p(k,D){e=k;const A={};D[0]&16&&(A.active=e[4]),D[0]&32&&(A.onRemove=$),i.$set(A);const j={};D[0]&32&&(j.data=e[51]),D[0]&2&&(j.editMode=e[1]),D[0]&16&&(j.layoutMode=e[4]),D[0]&1&&(j.sys=e[0]),D[0]&32&&(j.length=e[48].data.length),D[0]&32&&(j.index=e[53]),a.$set(j),(!f||D[0]&26&&l!==(l=e[1]||e[4]||e[3]))&&h(t,"data-edit",l),(!f||D[0]&32&&r!==(r=e[51].id))&&h(t,"data-itemid",r),(!f||D[0]&16)&&h(t,"data-edit-active",e[4]),(!f||D[0]&32&&o!==(o=e[14].isBeingDragged(e[51].id)))&&h(t,"data-dragging",o),(!f||D[0]&16)&&h(t,"draggable",e[4])},r(){u=t.getBoundingClientRect()},f(){We(t),_(),Pe(t,u)},a(){_(),_=Ge(t,u,at,{duration:_e})},i(k){f||(N(i.$$.fragment,k),N(a.$$.fragment,k),k&&se(()=>{f&&(d||(d=Y(t,Fe,{duration:_e},!0)),d.run(1))}),f=!0)},o(k){H(i.$$.fragment,k),H(a.$$.fragment,k),k&&(d||(d=Y(t,Fe,{duration:_e},!1)),d.run(0)),f=!1},d(k){k&&R(t),Q(i),Q(a),k&&d&&d.end(),g=!1,z(c)}}}function an(n,e){let t,i,s,a,l,r=[],o=new Map,d,u,_,f,g,c,$=T,p,v,E,m=e[45].data.length>1&&tn(e);function k(){return e[23](e[48])}s=new $e({props:{offset:15,active:e[4],addText:"add a new Item",onAdd:k}});let D=(e[4]||e[3])&&nn(),A=ae(e[48].data);const j=O=>O[51].id;for(let O=0;O<A.length;O+=1){let I=en(e,A,O),U=j(I);o.set(U,r[O]=sn(U,I))}function J(...O){return e[31](e[48],...O)}function M(...O){return e[32](e[48],...O)}function w(...O){return e[33](e[48],...O)}function F(...O){return e[34](e[48],...O)}function x(...O){return e[35](e[48],...O)}function ee(...O){return e[36](e[48],...O)}return{key:n,first:null,c(){t=b("div"),m&&m.c(),i=K(),X(s.$$.fragment),a=K(),D&&D.c(),l=K();for(let O=0;O<r.length;O+=1)r[O].c();h(t,"class","Column"),h(t,"data-edit",d=e[3]||e[2]),h(t,"data-editpreview",e[4]),h(t,"data-itemid",u=e[48].id),h(t,"data-edit-active",e[3]),h(t,"data-dragging",_=e[13].isBeingDragged(e[48].id)),h(t,"role","none"),h(t,"style",f=`
						${e[3]||e[2]?"margin-bottom:60px":""}
					`),h(t,"draggable",e[3]),this.first=t},m(O,I){B(O,t,I),m&&m.m(t,null),y(t,i),W(s,t,null),y(t,a),D&&D.m(t,null),y(t,l);for(let U=0;U<r.length;U+=1)r[U]&&r[U].m(t,null);p=!0,v||(E=[P(t,"dragstart",J),P(t,"dragenter",M),P(t,"dragend",w),P(t,"drop",F),P(t,"dragleave",x),P(t,"dragover",ee)],v=!0)},p(O,I){e=O,e[45].data.length>1?m?(m.p(e,I),I[0]&32&&N(m,1)):(m=tn(e),m.c(),N(m,1),m.m(t,i)):m&&(fe(),H(m,1,1,()=>{m=null}),ce());const U={};if(I[0]&16&&(U.active=e[4]),I[0]&32&&(U.onAdd=k),s.$set(U),e[4]||e[3]?D||(D=nn(),D.c(),D.m(t,l)):D&&(D.d(1),D=null),I[0]&19515){A=ae(e[48].data),fe();for(let q=0;q<r.length;q+=1)r[q].r();r=je(r,I,j,1,e,A,o,t,nt,sn,null,en);for(let q=0;q<r.length;q+=1)r[q].a();ce()}(!p||I[0]&12&&d!==(d=e[3]||e[2]))&&h(t,"data-edit",d),(!p||I[0]&16)&&h(t,"data-editpreview",e[4]),(!p||I[0]&32&&u!==(u=e[48].id))&&h(t,"data-itemid",u),(!p||I[0]&8)&&h(t,"data-edit-active",e[3]),(!p||I[0]&32&&_!==(_=e[13].isBeingDragged(e[48].id)))&&h(t,"data-dragging",_),(!p||I[0]&12&&f!==(f=`
						${e[3]||e[2]?"margin-bottom:60px":""}
					`))&&h(t,"style",f),(!p||I[0]&8)&&h(t,"draggable",e[3])},r(){c=t.getBoundingClientRect()},f(){We(t),$(),Pe(t,c)},a(){$(),$=Ge(t,c,at,{duration:_e})},i(O){if(!p){N(m),N(s.$$.fragment,O);for(let I=0;I<A.length;I+=1)N(r[I]);O&&se(()=>{p&&(g||(g=Y(t,Fe,{duration:_e},!0)),g.run(1))}),p=!0}},o(O){H(m),H(s.$$.fragment,O);for(let I=0;I<r.length;I+=1)H(r[I]);O&&(g||(g=Y(t,Fe,{duration:_e},!1)),g.run(0)),p=!1},d(O){O&&R(t),m&&m.d(),Q(s),D&&D.d();for(let I=0;I<r.length;I+=1)r[I].d();O&&g&&g.end(),v=!1,z(E)}}}function ln(n,e){let t,i,s,a,l,r=[],o=new Map,d,u,_,f,g=T,c,$,p;function v(){return e[20](e[45])}i=new $e({props:{active:e[3],onAdd:v,addText:"add Column"}});function E(){return e[21](e[45])}a=new $e({props:{active:e[2],onRemove:E,remText:"remove this line"}});let m=ae(e[45].data);const k=M=>M[48].id;for(let M=0;M<m.length;M+=1){let w=xt(e,m,M),F=k(w);o.set(F,r[M]=an(F,w))}function D(...M){return e[37](e[45],...M)}function A(...M){return e[38](e[45],...M)}function j(...M){return e[39](e[45],...M)}function J(...M){return e[40](e[45],...M)}return{key:n,first:null,c(){t=b("div"),X(i.$$.fragment),s=K(),X(a.$$.fragment),l=K();for(let M=0;M<r.length;M+=1)r[M].c();h(t,"class","Row"),h(t,"data-edit",e[2]),h(t,"data-edit-active",e[2]),h(t,"data-editpreview",e[3]),h(t,"role","none"),h(t,"style",d=`grid-template-columns:${on(e[45].data.length,"1fr")}`),h(t,"data-rowid",u=e[45].id),h(t,"draggable",e[2]),this.first=t},m(M,w){B(M,t,w),W(i,t,null),y(t,s),W(a,t,null),y(t,l);for(let F=0;F<r.length;F+=1)r[F]&&r[F].m(t,null);c=!0,$||(p=[P(t,"dragstart",D),P(t,"dragenter",A),P(t,"dragend",j),P(t,"dragover",J)],$=!0)},p(M,w){e=M;const F={};w[0]&8&&(F.active=e[3]),w[0]&32&&(F.onAdd=v),i.$set(F);const x={};if(w[0]&4&&(x.active=e[2]),w[0]&32&&(x.onRemove=E),a.$set(x),w[0]&27711){m=ae(e[45].data),fe();for(let ee=0;ee<r.length;ee+=1)r[ee].r();r=je(r,w,k,1,e,m,o,t,nt,an,null,xt);for(let ee=0;ee<r.length;ee+=1)r[ee].a();ce()}(!c||w[0]&4)&&h(t,"data-edit",e[2]),(!c||w[0]&4)&&h(t,"data-edit-active",e[2]),(!c||w[0]&8)&&h(t,"data-editpreview",e[3]),(!c||w[0]&32&&d!==(d=`grid-template-columns:${on(e[45].data.length,"1fr")}`))&&h(t,"style",d),(!c||w[0]&32&&u!==(u=e[45].id))&&h(t,"data-rowid",u),(!c||w[0]&4)&&h(t,"draggable",e[2])},r(){f=t.getBoundingClientRect()},f(){We(t),g(),Pe(t,f)},a(){g(),g=Ge(t,f,at,{duration:_e})},i(M){if(!c){N(i.$$.fragment,M),N(a.$$.fragment,M);for(let w=0;w<m.length;w+=1)N(r[w]);M&&se(()=>{c&&(_||(_=Y(t,$t,{duration:_e,y:100},!0)),_.run(1))}),c=!0}},o(M){H(i.$$.fragment,M),H(a.$$.fragment,M);for(let w=0;w<r.length;w+=1)H(r[w]);M&&(_||(_=Y(t,$t,{duration:_e,y:100},!1)),_.run(0)),c=!1},d(M){M&&R(t),Q(i),Q(a);for(let w=0;w<r.length;w+=1)r[w].d();M&&_&&_.end(),$=!1,z(p)}}}function rn(n){let e,t,i;return t=new $e({props:{active:n[2],onAdd:n[41],offset:15,addText:"add Line"}}),{c(){e=b("div"),X(t.$$.fragment),h(e,"class","Row"),_t(e,"height","100px")},m(s,a){B(s,e,a),W(t,e,null),i=!0},p(s,a){const l={};a[0]&4&&(l.active=s[2]),a[0]&32&&(l.onAdd=s[41]),t.$set(l)},i(s){i||(N(t.$$.fragment,s),i=!0)},o(s){H(t.$$.fragment,s),i=!1},d(s){s&&R(e),Q(t)}}}function hi(n){let e,t,i,s,a,l="Stop Edit	",r,o,d,u="Layout Row	",_,f,g,c="Layout Col	",$,p,v,E="Layout Items",m,k,D,A=[],j=new Map,J,M,w,F,x=ae(n[5].data);const ee=I=>I[45].id;for(let I=0;I<x.length;I+=1){let U=Zt(n,x,I),q=ee(U);j.set(q,A[I]=ln(q,U))}let O=n[2]&&rn(n);return{c(){e=b("div"),t=b("div"),i=b("div"),s=b("div"),a=b("button"),r=G(l),o=K(),d=b("button"),_=G(u),f=K(),g=b("button"),$=G(c),p=K(),v=b("button"),m=G(E),D=K();for(let I=0;I<A.length;I+=1)A[I].c();J=K(),O&&O.c(),h(a,"data-active",n[1]),h(d,"data-active",n[2]),h(g,"data-active",n[3]),h(v,"data-active",n[4]),h(s,"class","SheetEditorMenu"),h(s,"data-isopen",k=n[1]||n[2]||n[3]||n[4]),h(i,"class","SheetEditorMenuContainer"),h(t,"class","Sheet")},m(I,U){B(I,e,U),y(e,t),y(t,i),y(i,s),y(s,a),y(a,r),y(s,o),y(s,d),y(d,_),y(s,f),y(s,g),y(g,$),y(s,p),y(s,v),y(v,m),y(t,D);for(let q=0;q<A.length;q+=1)A[q]&&A[q].m(t,null);y(t,J),O&&O.m(t,null),M=!0,w||(F=[P(a,"click",n[16]),P(d,"click",n[17]),P(g,"click",n[18]),P(v,"click",n[19])],w=!0)},p(I,U){if((!M||U[0]&2)&&h(a,"data-active",I[1]),(!M||U[0]&4)&&h(d,"data-active",I[2]),(!M||U[0]&8)&&h(g,"data-active",I[3]),(!M||U[0]&16)&&h(v,"data-active",I[4]),(!M||U[0]&30&&k!==(k=I[1]||I[2]||I[3]||I[4]))&&h(s,"data-isopen",k),U[0]&31807){x=ae(I[5].data),fe();for(let q=0;q<A.length;q+=1)A[q].r();A=je(A,U,ee,1,I,x,j,t,nt,ln,J,Zt);for(let q=0;q<A.length;q+=1)A[q].a();ce()}I[2]?O?(O.p(I,U),U[0]&4&&N(O,1)):(O=rn(I),O.c(),N(O,1),O.m(t,null)):O&&(fe(),H(O,1,1,()=>{O=null}),ce())},i(I){if(!M){for(let U=0;U<x.length;U+=1)N(A[U]);N(O),M=!0}},o(I){for(let U=0;U<A.length;U+=1)H(A[U]);H(O),M=!1},d(I){I&&R(e);for(let U=0;U<A.length;U+=1)A[U].d();O&&O.d(),w=!1,z(F)}}}const qe=220,_e=100;class gi{constructor(e,t){C(this,"data");C(this,"state");C(this,"layerActive");C(this,"isDragging",!1);C(this,"pauseDragg",!1);C(this,"dragID");C(this,"targetID");this.data=e,this.state=t,this.layerActive=t.editLayout_01}moveRow(){this.isDragging&&(!this.dragID||!this.targetID||this.targetID==this.dragID||this.data.update(e=>{let t=this.findIndexOfID(this.dragID),i=this.findIndexOfID(this.targetID);const s=e.data[t];return this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},qe),e.data[t]=e.data[i],e.data[i]=s,e}))}onDragStart(e,t){if(!Z(this.layerActive))return;const i=e.target;i.classList.contains("Row")&&(this.isDragging=!0,this.dragID=t,i.setAttribute("data-dragging","true"))}onDragOver(e,t){Z(this.layerActive)&&(!this.isDragging||this.pauseDragg||(this.targetID=t,this.moveRow()))}onDragEnd(e,t){if(!Z(this.layerActive))return;this.isDragging=!1,this.dragID=null,this.targetID=null,e.target.setAttribute("data-dragging","false")}findIndexOfID(e){return Z(this.data).data.findIndex(t=>t.id==e)}}class _i{constructor(e,t){C(this,"data");C(this,"state");C(this,"layerActive");C(this,"isDragging",!1);C(this,"pauseDragg",!1);C(this,"dragTargetElement");C(this,"dragID");C(this,"targetID");C(this,"lastDragId");C(this,"lasttargId");this.data=e,this.state=t,this.layerActive=t.editLayout_02}innerMoveItem(e,t,i){let s,a,l,r;if([s,a]=this.findRowIndexOfID(t),[l,r]=this.findRowIndexOfID(i),s==-1||l==-1)return;const o=e.data[s].data[a],d=e.data[l].data[r];e.data[s].data[a]=d,e.data[l].data[r]=o}moveRowItem(){this.isDragging&&(!this.dragID||this.targetID==this.dragID||this.data.update(e=>this.dragID==this.lastDragId&&this.targetID==this.lasttargId?(this.innerMoveItem(e,this.lasttargId,this.lastDragId),e):(this.lastDragId&&this.lasttargId&&this.innerMoveItem(e,this.lastDragId,this.lasttargId),this.targetID&&this.innerMoveItem(e,this.dragID,this.targetID),this.lastDragId=this.dragID,this.lasttargId=this.targetID,this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},qe),e)))}onDragStart(e,t){if(!Z(this.layerActive))return;const i=e.target;i.classList.contains("Column")&&(this.dragTargetElement=i,this.isDragging=!0,this.dragID=t,this.lastDragId=null,this.lasttargId=null,i.setAttribute("data-dragging","true"))}onDragOver(e,t){var i;Z(this.layerActive)&&(!this.isDragging||this.pauseDragg||(this.targetID=t,this.moveRowItem(),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","true")))}onDragEnd(e,t){var i;Z(this.layerActive)&&(this.isDragging=!1,this.dragID=null,this.targetID=null,e.target.setAttribute("data-dragging","false"),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","false"))}onLeave(e,t){this.targetID=null}findRowIndexOfID(e){let t=-1;return[Z(this.data).data.findIndex(s=>{let a=s.data.findIndex(l=>l.id==e);return a!=-1?(t=a,!0):!1}),t]}isBeingDragged(e){return this.dragID==e}}class mi{constructor(e,t){C(this,"data");C(this,"state");C(this,"layerActive");C(this,"isDragging",!1);C(this,"pauseDragg",!1);C(this,"dragTargetElement");C(this,"dragID");C(this,"targetID");C(this,"targetRowId");C(this,"lastDragId");C(this,"lasttargId");C(this,"lasttargRowId");this.data=e,this.state=t,this.layerActive=t.editLayout_03}innerSwitchItem(e,t,i){let s,a,l,r,o,d;if([s,a,l]=this.findIndexsOfID(t),[r,o,d]=this.findIndexsOfID(i),s==-1||r==-1||a==-1||o==-1||l==-1||d==-1)return;const u=e.data[s].data[a].data[l],_=e.data[r].data[o].data[d];e.data[s].data[a].data[l]=_,e.data[r].data[o].data[d]=u}innerMoveItem(e,t,i){let s,a,l,r,o;if([s,a,l]=this.findIndexsOfID(t),[r,o]=this.findColumnIndexsOfID(i),s==-1||r==-1||a==-1||o==-1||l==-1||s==r&&a==o)return;let d=e.data[s].data[a].data.splice(l,1)[0];e.data[r].data[o].data.push(d)}moveRowItem(){this.isDragging&&(!this.dragID||this.targetID==this.dragID||this.targetRowId&&this.data.update(e=>(this.targetRowId&&this.innerMoveItem(e,this.dragID,this.targetRowId),this.lastDragId=this.dragID,this.lasttargId=this.targetID,this.lasttargRowId=null,this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},qe),e)))}requestMoveItemUpDown(e,t){this.data.update(i=>{let s,a,l;[s,a,l]=this.findIndexsOfID(t);let r=l+e;if(r<0)return;if(i.data[s].data[a].data.length-1<r)return console.error("Out of Bounds move, so did not attempt"),i;const o=i.data[s].data[a].data.splice(l,1)[0];return i.data[s].data[a].data.splice(r,0,o),this.pauseDragg=!0,setTimeout(()=>{this.pauseDragg=!1},qe),i})}onDragStart(e,t){if(!Z(this.layerActive))return;const i=e.target;i.classList.contains("Item")&&(this.dragTargetElement=i,this.isDragging=!0,this.dragID=t,this.lastDragId=null,this.lasttargId=null,i.setAttribute("data-dragging","true"))}onDragOverColumn(e,t){var i;Z(this.layerActive)&&(!this.isDragging||this.pauseDragg||(this.targetID=null,this.targetRowId=t,this.moveRowItem(),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","true")))}onDragEnd(e,t){var i;Z(this.layerActive)&&(this.isDragging=!1,this.dragID=null,this.targetID=null,e.target.setAttribute("data-dragging","false"),(i=this.dragTargetElement)==null||i.setAttribute("data-dragging","false"))}onLeave(e,t){this.targetID=null}findIndexsOfID(e){let t=-1,i=-1,s=-1;return s=Z(this.data).data.findIndex(l=>{let r=l.data.findIndex(o=>{let d=o.data.findIndex(u=>u.id==e);return d!=-1?(t=d,!0):!1});return r!=-1?(i=r,!0):!1}),[s,i,t]}findColumnIndexsOfID(e){let t=-1,i=-1;return i=Z(this.data).data.findIndex(a=>{let l=a.data.findIndex(r=>r.id==e);return l!=-1?(t=l,!0):!1}),[i,t]}isBeingDragged(e){return this.dragID==e}}class pi{constructor(){C(this,"editMode",Ne(!1));C(this,"editLayout_01",Ne(!1));C(this,"editLayout_02",Ne(!1));C(this,"editLayout_03",Ne(!1));this.editMode.subscribe(e=>{e&&(this.editLayout_01.set(!1),this.editLayout_02.set(!1),this.editLayout_03.set(!1))}),this.editLayout_01.subscribe(e=>{e&&(this.editLayout_02.set(!1),this.editLayout_03.set(!1),this.editMode.set(!1))}),this.editLayout_02.subscribe(e=>{e&&(this.editLayout_01.set(!1),this.editLayout_03.set(!1),this.editMode.set(!1))}),this.editLayout_03.subscribe(e=>{e&&(this.editLayout_01.set(!1),this.editLayout_02.set(!1),this.editMode.set(!1))})}}function on(n,e,t=" "){let i=e;for(let s=0;s<n-1;s++)i+=t,i+=e;return i}const vi=n=>{n.preventDefault()};function yi(n,e,t){let i,s,a,l,r,o=new pi,d=o.editMode;Ce(n,d,S=>t(1,i=S));let u=o.editLayout_01;Ce(n,u,S=>t(2,s=S));let _=o.editLayout_02;Ce(n,_,S=>t(3,a=S));let f=o.editLayout_03;Ce(n,f,S=>t(4,l=S));let{textData:g}=e,{sys:c}=e,$=JSON.parse(g),p=new Ln($),v=Ne(p);Ce(n,v,S=>t(5,r=S));function E(S,V){D.requestMoveItemUpDown(S,V)}ke(()=>{debugger});let m=new gi(v,o),k=new _i(v,o),D=new mi(v,o);const A=()=>d.set(!i),j=()=>u.set(!Z(u)),J=()=>_.set(!Z(_)),M=()=>f.set(!Z(f)),w=S=>{S.addColumn(),v.update(V=>V)},F=S=>{v.update(V=>(V.remRow(S.id),V))},x=(S,V)=>{S.remColumn(V.id),v.update(lt=>lt)},ee=S=>{S.addItem(),v.update(V=>V)},O=(S,V)=>{S.remItem(V.id),v.update(lt=>lt)},I=S=>{E(-1,S.detail)},U=S=>{E(1,S.detail)},q=(S,V)=>{D.onDragStart(V,S.id)},bi=(S,V)=>{D.onDragEnd(V,S.id)},$i=(S,V)=>{D.onDragEnd(V,S.id)},wi=(S,V)=>{D.onLeave(V,S.id)},Di=(S,V)=>{k.onDragStart(V,S.id)},ki=(S,V)=>{k.onDragOver(V,S.id),D.onDragOverColumn(V,S.id)},Ii=(S,V)=>{k.onDragEnd(V,S.id)},Si=(S,V)=>{k.onDragEnd(V,S.id)},Mi=(S,V)=>{k.onLeave(V,S.id)},Oi=(S,V)=>{k.onDragOver(V,S.id),D.onDragOverColumn(V,S.id),V.preventDefault()},Ci=(S,V)=>m.onDragStart(V,S.id),Li=(S,V)=>m.onDragOver(V,S.id),Ei=(S,V)=>m.onDragEnd(V,S.id),Ai=(S,V)=>{m.onDragOver(V,S.id),V.preventDefault()},Ri=()=>{v.update(S=>(S.addRow(),S.data[r.data.length-1].addColumn(),S))};return n.$$set=S=>{"textData"in S&&t(15,g=S.textData),"sys"in S&&t(0,c=S.sys)},[c,i,s,a,l,r,d,u,_,f,v,E,m,k,D,g,A,j,J,M,w,F,x,ee,O,I,U,q,bi,$i,wi,Di,ki,Ii,Si,Mi,Oi,Ci,Li,Ei,Ai,Ri]}class dn extends de{constructor(e){super(),re(this,e,yi,hi,ne,{textData:15,sys:0},null,[-1,-1])}get textData(){return this.$$.ctx[15]}set textData(e){this.$$set({textData:e}),L()}get sys(){return this.$$.ctx[0]}set sys(e){this.$$set({sys:e}),L()}}return oe(dn,{textData:{},sys:{}},[],[],!0),dn});
//# sourceMappingURL=components.umd.cjs.map
